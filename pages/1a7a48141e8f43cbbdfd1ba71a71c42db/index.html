<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>着色器学习（二） 内建变量 | beiklive&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/vuepresswiki/img/favicon.ico">
    <meta name="description" content="懒狗的摸鱼日记">
    <meta name="keywords" content="后端博客,个人技术博客,C++,linux,qt,python,技术文档,学习,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="codeva-dmUFtoNiz1">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/vuepresswiki/assets/css/0.styles.ebb96e62.css" as="style"><link rel="preload" href="/vuepresswiki/assets/js/app.40eac548.js" as="script"><link rel="preload" href="/vuepresswiki/assets/js/2.836013b7.js" as="script"><link rel="preload" href="/vuepresswiki/assets/js/34.87d1c221.js" as="script"><link rel="prefetch" href="/vuepresswiki/assets/js/10.d1691eb4.js"><link rel="prefetch" href="/vuepresswiki/assets/js/11.72661427.js"><link rel="prefetch" href="/vuepresswiki/assets/js/12.85c0f7d0.js"><link rel="prefetch" href="/vuepresswiki/assets/js/13.3a113aea.js"><link rel="prefetch" href="/vuepresswiki/assets/js/14.76b9b01e.js"><link rel="prefetch" href="/vuepresswiki/assets/js/15.74546a94.js"><link rel="prefetch" href="/vuepresswiki/assets/js/16.2ce4f1b2.js"><link rel="prefetch" href="/vuepresswiki/assets/js/17.8d938667.js"><link rel="prefetch" href="/vuepresswiki/assets/js/18.c5ed3554.js"><link rel="prefetch" href="/vuepresswiki/assets/js/19.6932d0f3.js"><link rel="prefetch" href="/vuepresswiki/assets/js/20.99e03be6.js"><link rel="prefetch" href="/vuepresswiki/assets/js/21.8830a1af.js"><link rel="prefetch" href="/vuepresswiki/assets/js/22.f7b7a0e4.js"><link rel="prefetch" href="/vuepresswiki/assets/js/23.3aa2140a.js"><link rel="prefetch" href="/vuepresswiki/assets/js/24.6a642f91.js"><link rel="prefetch" href="/vuepresswiki/assets/js/25.e8d935d9.js"><link rel="prefetch" href="/vuepresswiki/assets/js/26.6134f32e.js"><link rel="prefetch" href="/vuepresswiki/assets/js/27.5e6b3346.js"><link rel="prefetch" href="/vuepresswiki/assets/js/28.4b9ea32c.js"><link rel="prefetch" href="/vuepresswiki/assets/js/29.49a9f95b.js"><link rel="prefetch" href="/vuepresswiki/assets/js/3.d141297b.js"><link rel="prefetch" href="/vuepresswiki/assets/js/30.0bb4f568.js"><link rel="prefetch" href="/vuepresswiki/assets/js/31.d09b84f5.js"><link rel="prefetch" href="/vuepresswiki/assets/js/32.878198b5.js"><link rel="prefetch" href="/vuepresswiki/assets/js/33.8d5e01aa.js"><link rel="prefetch" href="/vuepresswiki/assets/js/35.fad1441f.js"><link rel="prefetch" href="/vuepresswiki/assets/js/36.377588ef.js"><link rel="prefetch" href="/vuepresswiki/assets/js/37.e72d7926.js"><link rel="prefetch" href="/vuepresswiki/assets/js/38.184f5e50.js"><link rel="prefetch" href="/vuepresswiki/assets/js/39.d174fdee.js"><link rel="prefetch" href="/vuepresswiki/assets/js/4.477da08c.js"><link rel="prefetch" href="/vuepresswiki/assets/js/40.f81e1c36.js"><link rel="prefetch" href="/vuepresswiki/assets/js/41.b76d5cda.js"><link rel="prefetch" href="/vuepresswiki/assets/js/42.0331f6f3.js"><link rel="prefetch" href="/vuepresswiki/assets/js/43.44dd50f8.js"><link rel="prefetch" href="/vuepresswiki/assets/js/44.a738fd16.js"><link rel="prefetch" href="/vuepresswiki/assets/js/45.a26282e7.js"><link rel="prefetch" href="/vuepresswiki/assets/js/46.6cf8220e.js"><link rel="prefetch" href="/vuepresswiki/assets/js/47.c506367b.js"><link rel="prefetch" href="/vuepresswiki/assets/js/48.0f7e438a.js"><link rel="prefetch" href="/vuepresswiki/assets/js/49.66d5d729.js"><link rel="prefetch" href="/vuepresswiki/assets/js/5.c1e927ca.js"><link rel="prefetch" href="/vuepresswiki/assets/js/50.2836e6cb.js"><link rel="prefetch" href="/vuepresswiki/assets/js/51.da767845.js"><link rel="prefetch" href="/vuepresswiki/assets/js/52.43ad0d93.js"><link rel="prefetch" href="/vuepresswiki/assets/js/53.caedd704.js"><link rel="prefetch" href="/vuepresswiki/assets/js/54.63cd160e.js"><link rel="prefetch" href="/vuepresswiki/assets/js/55.ddc03d1b.js"><link rel="prefetch" href="/vuepresswiki/assets/js/56.7ddb62a5.js"><link rel="prefetch" href="/vuepresswiki/assets/js/57.68f66a00.js"><link rel="prefetch" href="/vuepresswiki/assets/js/58.ac00695a.js"><link rel="prefetch" href="/vuepresswiki/assets/js/59.41042fa6.js"><link rel="prefetch" href="/vuepresswiki/assets/js/6.a75fb51e.js"><link rel="prefetch" href="/vuepresswiki/assets/js/60.01570637.js"><link rel="prefetch" href="/vuepresswiki/assets/js/61.fb0712e1.js"><link rel="prefetch" href="/vuepresswiki/assets/js/62.d84cb56d.js"><link rel="prefetch" href="/vuepresswiki/assets/js/63.76a546b5.js"><link rel="prefetch" href="/vuepresswiki/assets/js/64.224d601f.js"><link rel="prefetch" href="/vuepresswiki/assets/js/65.a1b7dac3.js"><link rel="prefetch" href="/vuepresswiki/assets/js/66.d4a4081d.js"><link rel="prefetch" href="/vuepresswiki/assets/js/7.0a052a90.js"><link rel="prefetch" href="/vuepresswiki/assets/js/8.01d01435.js"><link rel="prefetch" href="/vuepresswiki/assets/js/9.a4f78586.js">
    <link rel="stylesheet" href="/vuepresswiki/assets/css/0.styles.ebb96e62.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepresswiki/" class="home-link router-link-active"><img src="/vuepresswiki/img/logo.png" alt="beiklive's blog" class="logo"> <span class="site-name can-hide">beiklive's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepresswiki/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><a href="/vuepresswiki/learn/" class="link-title">学习</a> <span class="title" style="display:none;">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>语言学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepresswiki/note/cpp/" class="nav-link">C/C++</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/python/" class="nav-link">Python</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/qt/" class="nav-link">Qt</a></li></ul></li><li class="dropdown-item"><h4>系统&amp;引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepresswiki/note/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/godot/" class="nav-link">Godot</a></li></ul></li><li class="dropdown-item"><h4>啥都学</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepresswiki/note/other/" class="nav-link">夏姬八学</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/books/" class="nav-link">好好学习</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="记录" class="dropdown-title"><a href="/vuepresswiki/record/" class="link-title">记录</a> <span class="title" style="display:none;">记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>折腾记录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepresswiki/note/raspberrypi/" class="nav-link">树莓派</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/obsidian/" class="nav-link">Obsidian</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/record/" class="nav-link">实践记录</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源收集" class="dropdown-title"><a href="/vuepresswiki/resource/" class="link-title">资源收集</a> <span class="title" style="display:none;">资源收集</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepresswiki/pages/622949/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/pages/aaae5a/" class="nav-link">工具网站</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/pages/d4c1f1/" class="nav-link">Github项目</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/vuepresswiki/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepresswiki/friends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/about/" class="nav-link">关于</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vuepresswiki/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepresswiki/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/beiklive/vuepresswiki" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://beiklive-picbed-1-1306865739.cos.ap-nanjing.myqcloud.com/imgSource/c70e6188-0562-4d88-9768-931a9b2cb555.png"> <div class="blogger-info"><h3>beiklive</h3> <span>全沾艺人</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepresswiki/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><a href="/vuepresswiki/learn/" class="link-title">学习</a> <span class="title" style="display:none;">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>语言学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepresswiki/note/cpp/" class="nav-link">C/C++</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/python/" class="nav-link">Python</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/qt/" class="nav-link">Qt</a></li></ul></li><li class="dropdown-item"><h4>系统&amp;引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepresswiki/note/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/godot/" class="nav-link">Godot</a></li></ul></li><li class="dropdown-item"><h4>啥都学</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepresswiki/note/other/" class="nav-link">夏姬八学</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/books/" class="nav-link">好好学习</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="记录" class="dropdown-title"><a href="/vuepresswiki/record/" class="link-title">记录</a> <span class="title" style="display:none;">记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>折腾记录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepresswiki/note/raspberrypi/" class="nav-link">树莓派</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/obsidian/" class="nav-link">Obsidian</a></li><li class="dropdown-subitem"><a href="/vuepresswiki/note/record/" class="nav-link">实践记录</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="资源收集" class="dropdown-title"><a href="/vuepresswiki/resource/" class="link-title">资源收集</a> <span class="title" style="display:none;">资源收集</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepresswiki/pages/622949/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/pages/aaae5a/" class="nav-link">工具网站</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/pages/d4c1f1/" class="nav-link">Github项目</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/vuepresswiki/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepresswiki/friends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/about/" class="nav-link">关于</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vuepresswiki/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepresswiki/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vuepresswiki/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/beiklive/vuepresswiki" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/vuepresswiki/pages/dd2b8b2e13fe4e3880d19782069ebc75/" class="sidebar-link">着色器 - 修改指定位置颜色</a></li><li><a href="/vuepresswiki/pages/a4ca66e899bd4c50a8786d26feeeb73d/" class="sidebar-link">gdscript 常用代码片段</a></li><li><a href="/vuepresswiki/pages/abd2f474e06648b08cfbf045685ccc21/" class="sidebar-link">着色器 - 图片像素化</a></li><li><a href="/vuepresswiki/pages/5a29e9778c694bdd88fbb2b8170427e2/" class="sidebar-link">着色器学习（零） 基础简介</a></li><li><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c4db/" class="sidebar-link">着色器学习（一） 基本语法</a></li><li><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/" aria-current="page" class="active sidebar-link">着色器学习（二） 内建变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#渲染模式" class="sidebar-link">渲染模式</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#全局内置" class="sidebar-link">全局内置</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#顶点内置" class="sidebar-link">顶点内置</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#片断内置" class="sidebar-link">片断内置</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#内置灯光" class="sidebar-link">内置灯光</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#渲染模式-2" class="sidebar-link">渲染模式</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#顶点内置-2" class="sidebar-link">顶点内置</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#片段内置" class="sidebar-link">片段内置</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#内置灯光-2" class="sidebar-link">内置灯光</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#sdf函数" class="sidebar-link">SDF函数</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#渲染模式-3" class="sidebar-link">渲染模式</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#start-和-process-内置" class="sidebar-link">start 和 process 内置</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#start专用" class="sidebar-link">start专用</a></li><li class="sidebar-sub-header level2"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c42db/#process-专用" class="sidebar-link">Process 专用</a></li></ul></li><li><a href="/vuepresswiki/pages/1a7a48141e8f43cbb3dfd1ba71a71c4db/" class="sidebar-link">着色器学习（三） 内建函数</a></li><li><a href="/vuepresswiki/pages/1a7a481416e8f43cbbdfd1ba71a71c4db/" class="sidebar-link">着色器学习（四） 一些内建变量的使用</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/vuepresswiki/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/vuepresswiki/categories/?category=Note_Godot" title="分类" data-v-06225672>Note_Godot</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/beiklive" target="_blank" title="作者" class="beLink" data-v-06225672>beiklive</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-05-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">着色器学习（二） 内建变量<!----></h1>  <div class="theme-vdoing-content content__default"><div class="custom-block tip"><p class="custom-block-title">前一篇</p> <p><a href="/vuepresswiki/Note_Godot/04.着色器学习（一）-基本语法.html">04.着色器学习（一）-基本语法</a></p></div> <p>在Shader中，有许多内置变量可用，如 UV、COLOR 和 VERTEX。可用的变量取决于着色器的类型（空间、画布项或粒子）以及所使用的函数（vertex、fragment 或 light）。</p> <p>参考地址：https://docs.godotengine.org/en/4.1/tutorials/shaders/shader_reference/shading_language.html</p> <p>创建着色器脚本时可以看到有五种着色器类型</p> <p><img src="https://files-1306865739.cos.ap-beijing.myqcloud.com/202405151353960.webp" alt="image.png"></p> <h1 id="空间着色器-spatial"><a href="#空间着色器-spatial" class="header-anchor">#</a> 空间着色器（Spatial）</h1> <p>空间着色器用于为三维对象着色. 它们是Godot提供的最复杂的着色器类型. 空间着色器是高度可配置的, 具有不同的渲染模式和不同的渲染选项(例如: 次表面散射, 透射, 环境遮挡, 边缘照明等). 用户可以选择编辑顶点, 片段, 和光照处理器功能, 以影响如何绘制对象.</p> <p>:::info{title=&quot;内置标记&quot;}
标记为 &quot;in&quot; 的值是只读的. 标记为 &quot;out&quot; 的值是可以选择写入的, 不一定包含合理的值. 标记为 &quot;inout&quot; 的值提供一个合理的默认值, 并且可以选择写入. 采样器不是写入的对象, 它们没有被标记.
:::</p> <h2 id="渲染模式"><a href="#渲染模式" class="header-anchor">#</a> 渲染模式</h2> <table><thead><tr><th>渲染模式</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td><code>blend_mix</code></td> <td>混合混合模式（Alpha 为透明度），默认</td> <td>在材质中使用，表示混合混合模式。</td></tr> <tr><td><code>blend_add</code></td> <td>叠加混合模式</td> <td>在材质中使用，表示叠加混合模式。</td></tr> <tr><td><code>blend_sub</code></td> <td>减法混合模式</td> <td>在材质中使用，表示减法混合模式。</td></tr> <tr><td><code>blend_mul</code></td> <td>乘法混合模式</td> <td>在材质中使用，表示乘法混合模式。</td></tr> <tr><td><code>depth_draw_opaque</code></td> <td>仅绘制不透明几何体的深度</td> <td>在材质中使用，表示仅绘制不透明几何体的深度。</td></tr> <tr><td><code>depth_draw_always</code></td> <td>始终绘制深度</td> <td>在材质中使用，表示始终绘制深度。</td></tr> <tr><td><code>depth_draw_never</code></td> <td>不绘制深度</td> <td>在材质中使用，表示不绘制深度。</td></tr> <tr><td><code>depth_prepass_alpha</code></td> <td>对透明几何体进行不透明的深度处理</td> <td>在材质中使用，表示对透明几何体进行不透明的深度处理。</td></tr> <tr><td><code>depth_test_disabled</code></td> <td>禁用深度测试</td> <td>在材质中使用，表示禁用深度测试。</td></tr> <tr><td><code>sss_mode_skin</code></td> <td>Subsurface Scattering mode for skin</td> <td>在材质中使用，表示皮肤的亚表面散射模式。</td></tr> <tr><td><code>cull_back</code></td> <td>剔除背面（默认）</td> <td>在材质中使用，表示剔除背面。</td></tr> <tr><td><code>cull_front</code></td> <td>剔除正面</td> <td>在材质中使用，表示剔除正面。</td></tr> <tr><td><code>cull_disabled</code></td> <td>禁用剔除（双面）</td> <td>在材质中使用，表示禁用剔除，渲染双面。</td></tr> <tr><td><code>unshaded</code></td> <td>结果只使用反照率</td> <td>在材质中使用，表示结果只使用反照率，不考虑照明和阴影。</td></tr> <tr><td><code>wireframe</code></td> <td>Geometry draws using lines</td> <td>在材质中使用，表示以线框模式绘制几何体。</td></tr> <tr><td><code>diffuse_lambert</code></td> <td>漫反射使用 Lambert 着色（默认）</td> <td>在材质中使用，表示漫反射使用 Lambert 着色。</td></tr> <tr><td><code>diffuse_lambert_wrap</code></td> <td>漫反射使用 Lambert 环绕（受粗糙度影响）</td> <td>在材质中使用，表示漫反射使用 Lambert 环绕，受粗糙度影响。</td></tr> <tr><td><code>diffuse_burley</code></td> <td>漫反射使用 Burley（迪士尼 PBS）</td> <td>在材质中使用，表示漫反射使用 Burley（迪士尼 PBS）。</td></tr> <tr><td><code>diffuse_toon</code></td> <td>漫反射使用卡通着色</td> <td>在材质中使用，表示漫反射使用卡通着色。</td></tr> <tr><td><code>specular_schlick_ggx</code></td> <td>镜面反射使用 Schlick-GGX（默认）</td> <td>在材质中使用，表示镜面反射使用 Schlick-GGX。</td></tr> <tr><td><code>specular_blinn</code></td> <td>镜面反射使用 Blinn（兼容）</td> <td>在材质中使用，表示镜面反射使用 Blinn。</td></tr> <tr><td><code>specular_phong</code></td> <td>镜面反射使用 Phong（兼容）</td> <td>在材质中使用，表示镜面反射使用 Phong。</td></tr> <tr><td><code>specular_toon</code></td> <td>镜面反射使用 Toon</td> <td>在材质中使用，表示镜面反射使用 Toon。</td></tr> <tr><td><code>specular_disabled</code></td> <td>禁用镜面反射</td> <td>在材质中使用，表示禁用镜面反射。</td></tr> <tr><td><code>skip_vertex_transform</code></td> <td>VERTEX/NORMAL等需要在顶点函数中手动进行转换</td> <td>在材质中使用，表示在顶点函数中手动进行顶点转换。</td></tr> <tr><td><code>world_vertex_coords</code></td> <td>VERTEX/NORMAL等是以世界坐标而不是局部坐标修改的</td> <td>在材质中使用，表示使用世界坐标而不是局部坐标进行修改。</td></tr> <tr><td><code>ensure_correct_normals</code></td> <td>当对网格应用非均匀尺度时</td> <td>在材质中使用，表示在对网格应用非均匀尺度时确保正确的法线。</td></tr> <tr><td><code>shadows_disabled</code></td> <td>在着色器中禁用阴影计算</td> <td>在材质中使用，表示在着色器中禁用阴影计算。</td></tr> <tr><td><code>ambient_light_disabled</code></td> <td>禁用环境光和辐射度图的收益</td> <td>在材质中使用，表示禁用环境光和辐射度图的收益。</td></tr> <tr><td><code>shadow_to_opacity</code></td> <td>光照会改变alpha值, 阴影部分是不透明的, 而没有阴影的地方是透明的</td> <td>在材质中使用，表示光照会改变alpha值，阴影部分是不透明的，没有</td></tr></tbody></table> <h2 id="全局内置"><a href="#全局内置" class="header-anchor">#</a> 全局内置</h2> <p>全局内置的功能随处可见, 包括自定义功能.</p> <table><thead><tr><th>常数</th> <th>描述</th></tr></thead> <tbody><tr><td><code>in float TIME</code></td> <td>全局时间，以秒为单位。</td></tr> <tr><td><code>in float PI</code></td> <td>PI常数（3.141592）。圆周率与直径比例和半圈弧度。</td></tr> <tr><td><code>in float TAU</code></td> <td>TAU常数（6.283185）。等同于PI * 2，表示整圈的弧度。</td></tr> <tr><td><code>in float E</code></td> <td>E常数（2.718281）。欧拉数和自然对数的底。</td></tr></tbody></table> <h2 id="顶点内置"><a href="#顶点内置" class="header-anchor">#</a> 顶点内置</h2> <table><thead><tr><th>变量</th> <th>描述</th> <th>用法示例</th></tr></thead> <tbody><tr><td><code>in vec2 VIEWPORT_SIZE</code></td> <td>视口大小（单位为像素）。</td> <td>用于获取当前渲染视口的大小。</td></tr> <tr><td><code>in mat4 VIEW_MATRIX</code></td> <td>世界空间向视图空间的转换。</td> <td>用于将顶点从世界空间变换到视图空间。</td></tr> <tr><td><code>in mat4 INV_VIEW_MATRIX</code></td> <td>视图空间向世界空间的转换。</td> <td>用于将顶点从视图空间变换回世界空间。</td></tr> <tr><td><code>in mat4 INV_PROJECTION_MATRIX</code></td> <td>裁剪空间向视图空间的转换。</td> <td>用于将顶点从裁剪空间变换到视图空间。</td></tr> <tr><td><code>in vec3 NODE_POSITION_WORLD</code></td> <td>Node在世界空间的位置。</td> <td>用于获取Node在世界空间中的位置。</td></tr> <tr><td><code>in vec3 NODE_POSITION_VIEW</code></td> <td>Node在视图空间的位置。</td> <td>用于获取Node在视图空间中的位置。</td></tr> <tr><td><code>in vec3 CAMERA_POSITION_WORLD</code></td> <td>相机在世界空间的位置。</td> <td>用于获取相机在世界空间中的位置。</td></tr> <tr><td><code>in vec3 CAMERA_DIRECTION_WORLD</code></td> <td>相机在世界空间的方向。</td> <td>用于获取相机在世界空间中的方向。</td></tr> <tr><td><code>in bool OUTPUT_IS_SRGB</code></td> <td>当输出在sRGB颜色空间中时为true（在Compatibility渲染器中为true，在Forward+和Forward Mobile中为false）。</td> <td>用于检查当前输出是否在sRGB颜色空间中。</td></tr> <tr><td><code>in int INSTANCE_ID</code></td> <td>实例化的实例ID。</td> <td>用于获取当前实例的ID。</td></tr> <tr><td><code>in vec4 INSTANCE_CUSTOM</code></td> <td>实例的自定义数据（主要用于粒子）。</td> <td>用于获取实例的自定义数据。</td></tr> <tr><td><code>in int VIEW_INDEX</code></td> <td>正在渲染的视图。 VIEW_MONO_LEFT（0）表示单视图或左眼，VIEW_RIGHT（1）表示右眼。</td> <td>用于获取当前渲染的视图索引。</td></tr> <tr><td><code>in int VIEW_MONO_LEFT</code></td> <td>单视图或左眼的常量，始终为0。</td> <td>用于比较当前视图是否为单视图或左眼。</td></tr> <tr><td><code>in int VIEW_RIGHT</code></td> <td>右眼的常量，始终为1。</td> <td>用于比较当前视图是否为右眼。</td></tr> <tr><td><code>in vec3 EYE_OFFSET</code></td> <td>正在渲染的眼睛的位置偏移。仅适用于多视图渲染。</td> <td>用于获取当前渲染眼睛的位置偏移。</td></tr> <tr><td><code>inout vec3 VERTEX</code></td> <td>顶点在局部坐标中。</td> <td>用于修改或使用局部坐标中的顶点位置。</td></tr> <tr><td><code>in int VERTEX_ID</code></td> <td>顶点缓冲区中当前顶点的索引。</td> <td>用于获取当前顶点在顶点缓冲区中的索引。</td></tr> <tr><td><code>inout vec3 NORMAL</code></td> <td>局部坐标法线。</td> <td>用于修改或使用局部坐标中的法线。</td></tr> <tr><td><code>inout vec3 TANGENT</code></td> <td>局部坐标切线。</td> <td>用于修改或使用局部坐标中的切线。</td></tr> <tr><td><code>inout vec3 BINORMAL</code></td> <td>局部坐标次法线。</td> <td>用于修改或使用局部坐标中的次法线。</td></tr> <tr><td><code>out vec4 POSITION</code></td> <td>如果写入，则覆盖最终顶点位置。</td> <td>用于手动设置顶点的最终位置。</td></tr> <tr><td><code>inout vec2 UV</code></td> <td>主UV通道。</td> <td>用于修改或使用主UV通道的坐标。</td></tr> <tr><td><code>inout vec2 UV2</code></td> <td>辅助UV通道。</td> <td>用于修改或使用辅助UV通道的坐标。</td></tr> <tr><td><code>inout vec4 COLOR</code></td> <td>顶点颜色。</td> <td>用于修改或使用顶点的颜色。</td></tr> <tr><td><code>out float ROUGHNESS</code></td> <td>顶点照明的粗糙度。</td> <td>用于手动设置顶点的照明粗糙度。</td></tr> <tr><td><code>inout float POINT_SIZE</code></td> <td>点渲染的点大小。</td> <td>用于修改或使用点渲染的点大小。</td></tr> <tr><td><code>inout mat4 MODELVIEW_MATRIX</code></td> <td>模型空间向视图空间的变换（如果可用）。</td> <td>用于修改或使用模型空间到视图空间的变换矩阵。</td></tr> <tr><td><code>inout mat3 MODELVIEW_NORMAL_MATRIX</code></td> <td>模型空间到视图空间的法线矩阵。</td> <td>用于修改或使用模型空间到视图空间的法线矩阵。</td></tr> <tr><td><code>inout mat4 MODEL_MATRIX</code></td> <td>模型空间到世界空间的变换。</td> <td>用于修改或使用模型空间到世界空间的变换矩阵。</td></tr> <tr><td><code>inout mat3 MODEL_NORMAL_MATRIX</code></td> <td>模型空间到世界空间的法线矩阵。</td> <td>用于修改或使用模型空间到世界空间的法线矩阵。</td></tr> <tr><td><code>inout mat4 PROJECTION_MATRIX</code></td> <td>视图空间到裁剪空间的变换。</td> <td>用于修改或使用视图空间到裁剪空间的变换矩阵。</td></tr> <tr><td><code>inout uvec4 BONE_INDICES</code></td> <td>骨骼索引（用于蒙皮动画）。</td> <td>用于修改或使用顶点的骨骼索引。</td></tr> <tr><td><code>inout vec4 BONE_WEIGHTS</code></td> <td>骨骼权重（用于蒙皮动画）。</td> <td>用于修改或使用顶点的骨骼权重。</td></tr> <tr><td><code>in vec4 CUSTOM0</code></td> <td>自定义数据0。</td> <td>用于获取顶点的自定义数据0。</td></tr> <tr><td><code>in vec4 CUSTOM1</code></td> <td>自定义数据1。</td> <td>用于获取顶点的自定义数据1。</td></tr> <tr><td><code>in vec4 CUSTOM2</code></td> <td>自定义数据2。</td> <td>用于获取顶点的自定义数据2。</td></tr> <tr><td><code>in vec4 CUSTOM3</code></td> <td>自定义数据3。</td> <td>用于获取顶点的自定义数据3。</td></tr></tbody></table> <h2 id="片断内置"><a href="#片断内置" class="header-anchor">#</a> 片断内置</h2> <p>Godot片段处理器函数的默认用法是设置对象的材质属性, 并让内置渲染器处理最终的阴影. 但是, 你无需使用所有这些属性, 如果你不写入它们,Godot将优化掉相应的功能.</p> <table><thead><tr><th>变量名</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td><code>in vec2 VIEWPORT_SIZE</code></td> <td>视口大小（单位为像素）</td> <td>在着色器中使用，表示当前渲染目标的像素大小。</td></tr> <tr><td><code>in vec4 FRAGCOORD</code></td> <td>屏幕空间中像素中心的坐标</td> <td>在着色器中使用，表示当前像素的屏幕空间坐标。</td></tr> <tr><td><code>in bool FRONT_FACING</code></td> <td>是否为正面面</td> <td>在片段着色器中使用，表示当前片段是否为正面面。</td></tr> <tr><td><code>in vec3 VIEW</code></td> <td>从片段位置到摄像机的规范化向量（视图空间）</td> <td>在着色器中使用，表示从片段到摄像机的方向。</td></tr> <tr><td><code>in vec2 UV</code></td> <td>顶点功能传递的纹理坐标</td> <td>在着色器中使用，表示从顶点功能传递的主纹理坐标。</td></tr> <tr><td><code>in vec2 UV2</code></td> <td>顶点功能传递的第二组纹理坐标</td> <td>在着色器中使用，表示从顶点功能传递的辅助纹理坐标。</td></tr> <tr><td><code>in vec4 COLOR</code></td> <td>顶点功能传递的颜色</td> <td>在着色器中使用，表示从顶点功能传递的颜色信息。</td></tr> <tr><td><code>in vec2 POINT_COORD</code></td> <td>用 <code>POINT_SIZE</code> 绘制的点坐标</td> <td>在着色器中使用，表示用 <code>POINT_SIZE</code> 绘制的点的坐标。</td></tr> <tr><td><code>in bool OUTPUT_IS_SRGB</code></td> <td>输出是否在sRGB颜色空间</td> <td>在着色器中使用，表示当前输出是否在sRGB颜色空间。</td></tr> <tr><td><code>in mat4 MODEL_MATRIX</code></td> <td>模型空间到世界空间变换</td> <td>在着色器中使用，表示从模型空间到世界空间的变换矩阵。</td></tr> <tr><td><code>in mat3 MODEL_NORMAL_MATRIX</code></td> <td>模型空间法线矩阵</td> <td>在着色器中使用，表示从模型空间到世界空间的法线矩阵。</td></tr> <tr><td><code>in mat4 VIEW_MATRIX</code></td> <td>世界空间向视图空间转变</td> <td>在着色器中使用，表示从世界空间到视图空间的变换矩阵。</td></tr> <tr><td><code>in mat4 INV_VIEW_MATRIX</code></td> <td>视图空间向世界空间变换</td> <td>在着色器中使用，表示从视图空间到世界空间的逆变换矩阵。</td></tr> <tr><td><code>in mat4 PROJECTION_MATRIX</code></td> <td>视图空间向裁剪空间变换</td> <td>在着色器中使用，表示从视图空间到裁剪空间的变换矩阵。</td></tr> <tr><td><code>in mat4 INV_PROJECTION_MATRIX</code></td> <td>裁剪空间向视图空间变换</td> <td>在着色器中使用，表示从裁剪空间到视图空间的逆变换矩阵。</td></tr> <tr><td><code>in vec3 NODE_POSITION_WORLD</code></td> <td>Node位置，世界空间</td> <td>在着色器中使用，表示Node在世界空间中的位置。</td></tr> <tr><td><code>in vec3 NODE_POSITION_VIEW</code></td> <td>Node位置，视图空间</td> <td>在着色器中使用，表示Node在视图空间中的位置。</td></tr> <tr><td><code>in vec3 CAMERA_POSITION_WORLD</code></td> <td>Camera位置，世界空间</td> <td>在着色器中使用，表示摄像机在世界空间中的位置。</td></tr> <tr><td><code>in vec3 CAMERA_DIRECTION_WORLD</code></td> <td>Camera方向，世界空间</td> <td>在着色器中使用，表示摄像机在世界空间中的方向。</td></tr> <tr><td><code>in vec3 VERTEX</code></td> <td>顶点，视图空间 (默认情况下)</td> <td>在着色器中使用，表示当前顶点的位置。</td></tr> <tr><td><code>in int VIEW_INDEX</code></td> <td>渲染的视图索引</td> <td>在着色器中使用，表示当前渲染的视图索引。</td></tr> <tr><td><code>in int VIEW_MONO_LEFT</code></td> <td>单眼或左眼的常量，始终为0</td> <td>在着色器中使用，表示单眼或左眼的常量，始终为0。</td></tr> <tr><td><code>in int VIEW_RIGHT</code></td> <td>右眼的常量，始终为1</td> <td>在着色器中使用，表示右眼的常量，始终为1。</td></tr> <tr><td><code>in vec3 EYE_OFFSET</code></td> <td>渲染的眼睛的位置偏移</td> <td>在着色器中使用，表示当前渲染眼睛的位置偏移。</td></tr> <tr><td><code>sampler2D SCREEN_TEXTURE</code></td> <td>在Godot 4中已删除，使用带有hint_screen_texture的sampler2D</td> <td>在Godot 3.x中使用，表示屏幕纹理。</td></tr> <tr><td><code>in vec2 SCREEN_UV</code></td> <td>当前像素的屏幕UV坐标</td> <td>在着色器中使用，表示当前像素在屏幕上的UV坐标。</td></tr> <tr><td><code>sampler2D DEPTH_TEXTURE</code></td> <td>在Godot 4中已删除，使用带有hint_depth_texture的sampler2D</td> <td>在Godot 3.x中使用，表示深度纹理。</td></tr> <tr><td><code>out float DEPTH</code></td> <td>自定义深度值 (0..1)</td> <td>在着色器中使用，表示当前像素的深度值。</td></tr> <tr><td><code>inout vec3 NORMAL</code></td> <td>顶点函数中的法线向量 (默认为视图空间)</td> <td>在着色器中使用，表示当前顶点的法线向量。</td></tr> <tr><td><code>inout vec3 TANGENT</code></td> <td>顶点函数中的切线</td> <td>在着色器中使用，表示当前顶点的切线。</td></tr> <tr><td><code>inout vec3 BINORMAL</code></td> <td>顶点函数中的Binormal</td> <td>在着色器中使用，表示当前顶点的Binormal。</td></tr> <tr><td><code>out vec3 NORMAL_MAP</code></td> <td>从纹理中读取法线而不是NORMAL的法线</td> <td>在着色器中使用，表示从法线纹理中读取的法线。</td></tr> <tr><td><code>out float NORMAL_MAP_DEPTH</code></td> <td>法线图的深度值，默认为1.0</td> <td>在着色器中使用，表示法线图的深度值，通常为1.0。</td></tr> <tr><td><code>out vec3 ALBEDO</code></td> <td>反射颜色 (默认为白色)</td> <td>在着色器中使用，表示当前像素的反射颜色。</td></tr> <tr><td><code>out float ALPHA</code></td> <td>Alpha 值 (0..1)</td> <td>在着色器中使用，表示当前像素的Alpha值。</td></tr> <tr><td><code>out float ALPHA_SCISSOR_THRESHOLD</code></td> <td>Alpha 剪裁阈值</td> <td>在着色器中使用，表示Alpha剪裁的阈值。</td></tr> <tr><td><code>out float ALPHA_HASH_SCALE</code></td> <td>Alpha哈希刻度</td> <td>在着色器中使用，表示Alpha哈希的刻度。</td></tr> <tr><td><code>out float ALPHA_ANTIALIASING_EDGE</code></td> <td>Alpha边缘抗锯齿</td> <td>在着色器中使用，表示Alpha边缘抗锯齿。</td></tr> <tr><td><code>out vec2 ALPHA_TEXTURE_COORDINATE</code></td> <td>Alpha纹理坐标</td> <td>在着色器中使用，表示Alpha纹理的坐标。</td></tr> <tr><td><code>out float METALLIC</code></td> <td>金属性（0..1）</td> <td>在着色器中使用，表示金属性。</td></tr> <tr><td><code>out float SPECULAR</code></td> <td>镜面反射，默认为0.5，最好不要修改</td> <td>在着色器中使用，表示镜面反射，最好不要修改除非你想改变IOR。</td></tr> <tr><td><code>out float ROUGHNESS</code></td> <td>粗糙度（0..1）</td> <td>在着色器中使用，表示粗糙度。</td></tr> <tr><td><code>out float RIM</code></td> <td>边缘（0-1区间），Godot计算边缘照明</td> <td>在着色器中使用，表示边缘，如果使用，Godot将计算边缘照明。</td></tr> <tr><td><code>out float RIM_TINT</code></td> <td>边缘色调，从0(白色)到1(反射)，Godot计算边缘光照</td> <td>在着色器中使用，表示边缘色调，如果使用，Godot将计算边缘光照。</td></tr> <tr><td><code>out float CLEARCOAT</code></td> <td>小幅增加镜面反射斑点，Godot计算清漆涂层</td> <td>在着色器中使用，表示清漆涂层。</td></tr> <tr><td><code>out float CLEARCOAT_GLOSS</code></td> <td>清漆涂层的光泽度，Godot计算清漆涂层</td> <td>在着色器中使用，表示清漆涂层的光泽度。</td></tr> <tr><td><code>out float ANISOTROPY</code></td> <td>用于根据切线空间扭曲镜面反射斑点</td> <td>在着色器中使用，表示根据切线空间扭曲的镜面反射斑点。</td></tr> <tr><td><code>out vec2 ANISOTROPY_FLOW</code></td> <td>失真方向，与流程图一起使用</td> <td>在着色器中使用，表示失真方向，与流程图一起使用。</td></tr> <tr><td><code>out float SSS_STRENGTH</code></td> <td>次表面散射强度，如果使用，物体将应用次表面散射</td> <td>在着色器中使用，表示次表面散射强度。</td></tr> <tr><td><code>out vec4 SSS_TRANSMITTANCE_COLOR</code></td> <td>次表面散射透射颜色</td> <td>在着色器中使用，表示次表面散射透射颜色。</td></tr> <tr><td><code>out float SSS_TRANSMITTANCE_DEPTH</code></td> <td>次表面散射透射深度</td> <td>在着色器中使用，表示次表面散射透射深度。</td></tr> <tr><td><code>out float SSS_TRANSMITTANCE_BOOST</code></td> <td>次表面散射透射增强</td> <td>在着色器中使用，表示次表面散射透射增强。</td></tr> <tr><td><code>inout vec3 BACKLIGHT</code></td> <td>反光光照</td> <td>在着色器中使用，表示反光光照。</td></tr> <tr><td><code>out float AO</code></td> <td>环境遮挡</td> <td>在着色器中使用，表示环境遮挡，通常与预焙环境遮挡一起使用。</td></tr> <tr><td><code>out float AO_LIGHT_AFFECT</code></td> <td>环境遮挡对灯光的影响程度，取值在0到1之间， 默认为0</td> <td>在着色器中使用，表示环境遮挡对灯光的影响程度，通常在0到1之间， 默认为0。</td></tr> <tr><td><code>out vec3 EMISSION</code></td> <td>发射颜色(HDR可以超过1,1,1)</td> <td>在着色器中使用，表示发射颜色，通常用于HDR，可以超过1,1,1。</td></tr> <tr><td><code>out vec4 FOG</code></td> <td>如果写入，基于FOG.a，将最终像素颜色与FOG.rgb混合</td> <td>在着色器中使用，表示雾效果，如果写入，基于FOG.a，将最终像素颜色与FOG.rgb混合。</td></tr> <tr><td><code>out vec4 RADIANCE</code></td> <td>如果写入，基于RADIANCE.a，将环境贴图辐射与RADIANCE.rgb混合</td> <td>在着色器中使用，表示环境贴图辐射，如果写入，基于RADIANCE.a，将环境贴图辐射与RADIANCE.rgb混合。</td></tr> <tr><td><code>out vec4 IRRADIANCE</code></td> <td>如果写入，基于IRRADIANCE.a，将环境贴图辐射与IRRADIANCE.rgb混合</td> <td>在着色器中使用，表示环境贴图辐射，如果写入，基于IRRADIANCE.a，将环境贴图辐射与IRRADIANCE.rgb混合。</td></tr></tbody></table> <h2 id="内置灯光"><a href="#内置灯光" class="header-anchor">#</a> 内置灯光</h2> <p>编写光处理器功能是完全可选的。您可以通过设置 render_mode 为 <code>unshaded</code> 来跳过光照函数。如果没有写入光照函数，Godot 将使用片段函数中写入的材质属性来为您计算光照（取决于 render_mode）。</p> <p>要写一个光照函数，要给 <code>DIFFUSE_LIGHT</code> 或 <code>SPECULAR_LIGHT</code> 指定一些东西。不指定任何东西意味着不处理光照。</p> <p>每个像素中的每个光都调用光照函数. 在每个光类型的循环中被调用.</p> <p>下面是一个使用兰伯特光照模型的自定义光函数的例子:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">void</span> <span class="token function">light</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">DIFFUSE_LIGHT</span> <span class="token operator">+=</span> <span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span><span class="token constant">NORMAL</span><span class="token punctuation">,</span> <span class="token constant">LIGHT</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">ATTENUATION</span> <span class="token operator">*</span> <span class="token constant">ALBEDO</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果你想把这些光照加在一起，请使用 <code>+=</code> 运算符将光线添加到 <code>DIFFUSE_LIGHT</code> 函数中，不要覆盖它。</p> <p>:::warning{title=&quot;注意&quot;}
如果启用了 <code>vertex_lighting</code> 渲染模式, 或者在项目设置中启用了 <em><strong>Rendering渲染&gt;Quality质量&gt;Shading着色&gt;强制顶点着色</strong></em> , 则不会运行 <code>light()</code> 函数.(在移动平台上默认启用.)
:::</p> <table><thead><tr><th>变量名</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td><code>in vec2 VIEWPORT_SIZE</code></td> <td>视口大小（单位为像素）</td> <td>在着色器中使用，表示视口大小，以像素为单位。</td></tr> <tr><td><code>in vec4 FRAGCOORD</code></td> <td>屏幕空间中像素中心的坐标</td> <td>在着色器中使用，表示像素中心的屏幕空间坐标，包括窗口位置和深度。</td></tr> <tr><td><code>in mat4 MODEL_MATRIX</code></td> <td>模型空间到世界空间变换</td> <td>在着色器中使用，表示模型空间到世界空间的变换矩阵。</td></tr> <tr><td><code>in mat4 INV_VIEW_MATRIX</code></td> <td>视图空间向世界空间变换</td> <td>在着色器中使用，表示视图空间向世界空间的逆变换矩阵。</td></tr> <tr><td><code>in mat4 VIEW_MATRIX</code></td> <td>世界空间向视图空间转变</td> <td>在着色器中使用，表示世界空间到视图空间的变换矩阵。</td></tr> <tr><td><code>in mat4 PROJECTION_MATRIX</code></td> <td>视图空间向裁剪空间变换</td> <td>在着色器中使用，表示视图空间向裁剪空间的变换矩阵。</td></tr> <tr><td><code>in mat4 INV_PROJECTION_MATRIX</code></td> <td>裁剪空间向视图空间变换</td> <td>在着色器中使用，表示裁剪空间向视图空间的逆变换矩阵。</td></tr> <tr><td><code>in vec3 NORMAL</code></td> <td>法向量，在视图空间中</td> <td>在着色器中使用，表示法向量，通常在视图空间中。</td></tr> <tr><td><code>in vec2 UV</code></td> <td>来自顶点功能的UV</td> <td>在着色器中使用，表示来自顶点功能的UV坐标。</td></tr> <tr><td><code>in vec2 UV2</code></td> <td>来自顶点功能的UV2</td> <td>在着色器中使用，表示来自顶点功能的UV2坐标。</td></tr> <tr><td><code>in vec3 VIEW</code></td> <td>视图向量，在视图空间中</td> <td>在着色器中使用，表示视图向量，通常在视图空间中。</td></tr> <tr><td><code>in vec3 LIGHT</code></td> <td>灯光向量，在视图空间中</td> <td>在着色器中使用，表示灯光向量，通常在视图空间中。</td></tr> <tr><td><code>in vec3 LIGHT_COLOR</code></td> <td>Color of light multiplied by energy * PI</td> <td>在着色器中使用，表示经过能量和PI乘法后的光的颜色。</td></tr> <tr><td><code>in float SPECULAR_AMOUNT</code></td> <td>2.0 * light_specular property for OmniLight3D and SpotLight3D. 1.0 for DirectionalLight3D</td> <td>在着色器中使用，表示OmniLight3D和SpotLight3D的2.0 * light_specular属性，DirectionalLight3D的值为1.0。</td></tr> <tr><td><code>in bool LIGHT_IS_DIRECTIONAL</code></td> <td>true if this pass is a DirectionalLight3D</td> <td>在着色器中使用，表示此通道是否为DirectionalLight3D。</td></tr> <tr><td><code>in float ATTENUATION</code></td> <td>基于距离或阴影的衰减</td> <td>在着色器中使用，表示基于距离或阴影的衰减值。</td></tr> <tr><td><code>in vec3 ALBEDO</code></td> <td>基础反射</td> <td>在着色器中使用，表示基础反射值。</td></tr> <tr><td><code>in vec3 BACKLIGHT</code></td> <td></td> <td>在着色器中使用，表示背光效果。</td></tr> <tr><td><code>in float METALLIC</code></td> <td>Metallic</td> <td>在着色器中使用，表示金属度。</td></tr> <tr><td><code>in float ROUGHNESS</code></td> <td>粗糙度</td> <td>在着色器中使用，表示粗糙度值。</td></tr> <tr><td><code>in bool OUTPUT_IS_SRGB</code></td> <td>true when output is in sRGB color space</td> <td>在着色器中使用，表示输出是否在sRGB颜色空间中。</td></tr> <tr><td><code>out vec3 DIFFUSE_LIGHT</code></td> <td>漫射光效果</td> <td>在着色器中使用，表示漫射光效果。</td></tr> <tr><td><code>out vec3 SPECULAR_LIGHT</code></td> <td>镜面反射光效果</td> <td>在着色器中使用，表示镜面反射光效果。</td></tr> <tr><td><code>out float ALPHA</code></td> <td>Alpha (0..1);如果写入, 材质将进入透明管道</td> <td>在着色器中使用，表示Alpha通道值，如果写入，材质将进入透明管道。</td></tr></tbody></table> <hr> <h1 id="画布物品着色器-canvasitem"><a href="#画布物品着色器-canvasitem" class="header-anchor">#</a> 画布物品着色器 (CanvasItem)</h1> <p>画布组件着色器用于绘制Godot中的所有二维元素. 这包括从画布组件继承的所有节点, 以及所有图形用户界面元素.</p> <p>画布组件着色器比空间着色器包含更少的内置变量和功能, 但它们与顶点, 片段和光处理器功能保持相同的基本结构.</p> <h2 id="渲染模式-2"><a href="#渲染模式-2" class="header-anchor">#</a> 渲染模式</h2> <table><thead><tr><th>渲染模式</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td><code>blend_mix</code></td> <td>混合混合模式（Alpha 为透明度），默认</td> <td>在材质中使用，表示混合混合模式。</td></tr> <tr><td><code>blend_add</code></td> <td>叠加混合模式</td> <td>在材质中使用，表示叠加混合模式。</td></tr> <tr><td><code>blend_sub</code></td> <td>减法混合模式</td> <td>在材质中使用，表示减法混合模式。</td></tr> <tr><td><code>blend_mul</code></td> <td>乘法混合模式</td> <td>在材质中使用，表示乘法混合模式。</td></tr> <tr><td><code>blend_premul_alpha</code></td> <td>预乘 Alpha 混合模式</td> <td>在材质中使用，表示预乘 Alpha 混合模式。</td></tr> <tr><td><code>blend_disabled</code></td> <td>禁用混合，值（包括 Alpha）会按原样写入</td> <td>在材质中使用，表示禁用混合，值（包括 Alpha）会按原样写入。</td></tr> <tr><td><code>unshaded</code></td> <td>结果只使用反照率</td> <td>在材质中使用，表示结果只使用反照率，不考虑照明和阴影。</td></tr> <tr><td><code>light_only</code></td> <td>仅在光通过时绘制</td> <td>在材质中使用，表示仅在光通过时绘制。</td></tr> <tr><td><code>skip_vertex_transform</code></td> <td>VERTEX/NORMAL/等需要在顶点函数中手动转换</td> <td>在材质中使用，表示在顶点函数中手动进行顶点转换。</td></tr></tbody></table> <h2 id="顶点内置-2"><a href="#顶点内置-2" class="header-anchor">#</a> 顶点内置</h2> <table><thead><tr><th>变量</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td><code>in mat4 MODEL_MATRIX</code></td> <td>局部坐标到世界坐标的转换</td> <td>在着色器中使用，表示局部坐标到世界坐标的转换矩阵。</td></tr> <tr><td><code>in mat4 CANVAS_MATRIX</code></td> <td>世界坐标到画布坐标的转换</td> <td>在着色器中使用，表示世界坐标到画布坐标的转换矩阵。</td></tr> <tr><td><code>in mat4 SCREEN_MATRIX</code></td> <td>画布坐标到裁剪坐标的转换</td> <td>在着色器中使用，表示画布坐标到裁剪坐标的转换矩阵。</td></tr> <tr><td><code>in vec4 INSTANCE_CUSTOM</code></td> <td>实例自定义数据</td> <td>在着色器中使用，表示实例自定义数据。</td></tr> <tr><td><code>in bool AT_LIGHT_PASS</code></td> <td>始终为false</td> <td>在着色器中使用，表示始终为false。</td></tr> <tr><td><code>in vec2 TEXTURE_PIXEL_SIZE</code></td> <td>默认2D纹理的规范化像素大小</td> <td>在着色器中使用，表示默认2D纹理的规范化像素大小。</td></tr> <tr><td><code>inout vec2 VERTEX</code></td> <td>图像空间中的顶点</td> <td>在着色器中使用，表示图像空间中的顶点。</td></tr> <tr><td><code>inout vec2 UV</code></td> <td>规范化的纹理坐标</td> <td>在着色器中使用，表示规范化的纹理坐标，范围从0到1。</td></tr> <tr><td><code>inout vec4 COLOR</code></td> <td>来自顶点原语的颜色</td> <td>在着色器中使用，表示来自顶点原语的颜色。</td></tr> <tr><td><code>inout float POINT_SIZE</code></td> <td>点绘图的点大小</td> <td>在着色器中使用，表示点绘图的点大小。</td></tr></tbody></table> <h2 id="片段内置"><a href="#片段内置" class="header-anchor">#</a> 片段内置</h2> <table><thead><tr><th>变量</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td><code>in vec4 FRAGCOORD</code></td> <td>像素中心的坐标</td> <td>在着色器中使用，表示像素中心的坐标。在屏幕空间中，xy 表示窗口中的位置，如果没有用 DEPTH，则 z 表示片段深度。原点位于左下角。</td></tr> <tr><td><code>in vec2 SCREEN_PIXEL_SIZE</code></td> <td>单个像素的大小</td> <td>在着色器中使用，表示单个像素的大小。等于分辨率的倒数。</td></tr> <tr><td><code>in vec2 POINT_COORD</code></td> <td>所绘制点的坐标</td> <td>在着色器中使用，表示所绘制点的坐标。</td></tr> <tr><td><code>sampler2D TEXTURE</code></td> <td>默认的2D纹理</td> <td>在着色器中使用，表示默认的2D纹理。</td></tr> <tr><td><code>in vec2 TEXTURE_PIXEL_SIZE</code></td> <td>规范化纹理像素大小</td> <td>在着色器中使用，表示规范化纹理像素大小。对于一个大小为64x32px的Sprite2D纹理，TEXTURE_PIXEL_SIZE = vec2(1/64, 1/32)。</td></tr> <tr><td><code>in bool AT_LIGHT_PASS</code></td> <td>始终为false</td> <td>在着色器中使用，表示始终为false。</td></tr> <tr><td><code>sampler2D SPECULAR_SHININESS_TEXTURE</code></td> <td>对象的镜面反射度纹理</td> <td>在着色器中使用，表示对象的镜面反射度纹理。</td></tr> <tr><td><code>in vec4 SPECULAR_SHININESS</code></td> <td>镜面反射度颜色，从纹理中取样</td> <td>在着色器中使用，表示镜面反射度颜色，从纹理中取样。</td></tr> <tr><td><code>in vec2 UV</code></td> <td>来自顶点功能的UV</td> <td>在着色器中使用，表示来自顶点功能的UV。</td></tr> <tr><td><code>in vec2 SCREEN_UV</code></td> <td>屏幕当前像素的UV坐标</td> <td>在着色器中使用，表示屏幕当前像素的UV坐标。</td></tr> <tr><td><code>sampler2D SCREEN_TEXTURE</code></td> <td>已在Godot 4中移除。使用带有 hint_screen_texture 的sampler2D</td> <td>在着色器中使用，表示已在Godot 4中移除。使用带有 hint_screen_texture 的sampler2D。</td></tr> <tr><td><code>inout vec3 NORMAL</code></td> <td>从 NORMAL_TEXTURE 中读取，可写</td> <td>在着色器中使用，表示从 NORMAL_TEXTURE 中读取法线。</td></tr> <tr><td><code>sampler2D NORMAL_TEXTURE</code></td> <td>默认2D法线纹理</td> <td>在着色器中使用，表示默认2D法线纹理。</td></tr> <tr><td><code>out vec3 NORMAL_MAP</code></td> <td>用于2D中的法线贴图配置，如果使用则覆盖NORMAL</td> <td>在着色器中使用，表示用于2D中的法线贴图配置，如果使用则覆盖NORMAL。</td></tr> <tr><td><code>out float NORMAL_MAP_DEPTH</code></td> <td>用于法线贴图的深度缩放</td> <td>在着色器中使用，表示用于法线贴图的深度缩放。</td></tr> <tr><td><code>inout vec2 VERTEX</code></td> <td>屏幕空间中的像素位置</td> <td>在着色器中使用，表示屏幕空间中的像素位置。</td></tr> <tr><td><code>inout vec2 SHADOW_VERTEX</code></td> <td>与VERTEX相同，但可写以更改阴影</td> <td>在着色器中使用，表示与VERTEX相同，但可写以更改阴影。</td></tr> <tr><td><code>inout vec3 LIGHT_VERTEX</code></td> <td>与VERTEX相同，但可写以更改照明</td> <td>在着色器中使用，表示与VERTEX相同，但可写以更改照明。</td></tr> <tr><td><code>inout vec4 COLOR</code></td> <td>来自顶点函数和输出片段颜色</td> <td>在着色器中使用，表示来自顶点函数和输出片段颜色。</td></tr></tbody></table> <h2 id="内置灯光-2"><a href="#内置灯光-2" class="header-anchor">#</a> 内置灯光</h2> <table><thead><tr><th>变量</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td><code>in vec4 FRAGCOORD</code></td> <td>像素中心的坐标</td> <td>在着色器中使用，表示像素中心的坐标。在屏幕空间中，xy 表示窗口中的位置，如果没有用 DEPTH，则 z 表示片段深度。原点位于左下角。</td></tr> <tr><td><code>in vec3 NORMAL</code></td> <td>输入法线</td> <td>在着色器中使用，表示输入法线。</td></tr> <tr><td><code>in vec4 COLOR</code></td> <td>输入颜色。这是带有最终调制的片段函数的输出颜色。</td> <td>在着色器中使用，表示输入颜色。这是带有最终调制的片段函数的输出颜色。</td></tr> <tr><td><code>in vec2 UV</code></td> <td>来自顶点函数的UV，相当于片段函数中的UV。</td> <td>在着色器中使用，表示来自顶点函数的UV。相当于片段函数中的UV。</td></tr> <tr><td><code>sampler2D TEXTURE</code></td> <td>当前CanvasItem使用的纹理。</td> <td>在着色器中使用，表示当前CanvasItem使用的纹理。</td></tr> <tr><td><code>in vec2 TEXTURE_PIXEL_SIZE</code></td> <td>默认2D纹理的规范化像素大小。</td> <td>在着色器中使用，表示默认2D纹理的规范化像素大小。对于一个大小为64x32px的Sprite2D纹理，TEXTURE_PIXEL_SIZE = vec2(1/64, 1/32)。</td></tr> <tr><td><code>in vec2 SCREEN_UV</code></td> <td>屏幕当前像素的UV坐标。</td> <td>在着色器中使用，表示屏幕当前像素的UV坐标。</td></tr> <tr><td><code>in vec2 POINT_COORD</code></td> <td>点精灵的UV坐标。</td> <td>在着色器中使用，表示点精灵的UV坐标。</td></tr> <tr><td><code>in vec4 LIGHT_COLOR</code></td> <td>光的颜色。</td> <td>在着色器中使用，表示光的颜色。</td></tr> <tr><td><code>in float LIGHT_ENERGY</code></td> <td>光的能量乘数。</td> <td>在着色器中使用，表示光的能量乘数。</td></tr> <tr><td><code>in vec3 LIGHT_POSITION</code></td> <td>光的位置，以屏幕空间为单位。如果使用DirectionalLight2D，则始终为vec3(0,0,0)。</td> <td>在着色器中使用，表示光的位置，以屏幕空间为单位。如果使用DirectionalLight2D，则始终为vec3(0,0,0)。</td></tr> <tr><td><code>in vec3 LIGHT_DIRECTION</code></td> <td>光的方向，以屏幕空间为单位。</td> <td>在着色器中使用，表示光的方向，以屏幕空间为单位。</td></tr> <tr><td><code>in bool LIGHT_IS_DIRECTIONAL</code></td> <td>如果此通道是DirectionalLight2D，则为true。</td> <td>在着色器中使用，表示如果此通道是DirectionalLight2D，则为true。</td></tr> <tr><td><code>in vec3 LIGHT_VERTEX</code></td> <td>像素位置，以屏幕空间为单位，如在片段函数中修改。</td> <td>在着色器中使用，表示像素位置，以屏幕空间为单位，如在片段函数中修改。</td></tr> <tr><td><code>inout vec4 LIGHT</code></td> <td>从浅色纹理和输出颜色中取值。可修改。如果不使用，将忽略光照函数。</td> <td>在着色器中使用，表示从浅色纹理和输出颜色中取值。可修改。如果不使用，将忽略光照函数。</td></tr> <tr><td><code>in vec4 SPECULAR_SHININESS</code></td> <td>物体纹理中设置的镜面反射度。</td> <td>在着色器中使用，表示物体纹理中设置的镜面反射度。</td></tr> <tr><td><code>out vec4 SHADOW_MODULATE</code></td> <td>将在此点投射的阴影乘以此颜色。</td> <td>在着色器中使用，表示将在此点投射的阴影乘以此颜色。</td></tr></tbody></table> <h2 id="sdf函数"><a href="#sdf函数" class="header-anchor">#</a> SDF函数</h2> <p>这些函数用于在CanvasItem着色器中对自动生成的Signed Distance Field（SDF）纹理进行采样。SDF纹理是从场景中启用了SDF Collision属性的LightOccluder2D节点生成的。有关更多信息，请参阅2D灯光和阴影文档。</p> <table><thead><tr><th>函数</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td><code>float texture_sdf (vec2 sdf_pos)</code></td> <td>执行SDF纹理查找。</td> <td>在CanvasItem着色器的Fragment和Light函数中使用，执行SDF纹理查找。传入SDF纹理坐标，返回相应位置的距离值。</td></tr> <tr><td><code>vec2 texture_sdf_normal (vec2 sdf_pos)</code></td> <td>执行SDF法线纹理查找。</td> <td>在CanvasItem着色器的Fragment和Light函数中使用，执行SDF法线纹理查找。传入SDF纹理坐标，返回相应位置的法线值。</td></tr> <tr><td><code>vec2 sdf_to_screen_uv (vec2 sdf_pos)</code></td> <td>将SDF坐标转换为屏幕UV坐标。</td> <td>在CanvasItem着色器的Fragment和Light函数中使用，将SDF坐标转换为屏幕UV坐标。传入SDF坐标，返回相应的屏幕UV坐标。</td></tr> <tr><td><code>vec2 screen_uv_to_sdf (vec2 uv)</code></td> <td>将屏幕UV坐标转换为SDF坐标。</td> <td>在CanvasItem着色器的Fragment和Light函数中使用，将屏幕UV坐标转换为SDF坐标。传入屏幕UV坐标，返回相应的SDF坐标。</td></tr></tbody></table> <hr> <h1 id="粒子着色器-particle"><a href="#粒子着色器-particle" class="header-anchor">#</a> 粒子着色器（particle）</h1> <p>Particle shaders是一种特殊类型的着色器，在对象被绘制之前运行。它们用于计算材质属性，如颜色、位置和旋转。它们与CanvasItem或Spatial的常规材质一起绘制，具体取决于它们是2D还是3D。</p> <p>Particle shaders是独特的，因为它们不用于绘制对象本身；它们用于计算粒子属性，然后由CanvasItem或Spatial着色器使用。它们包含两个处理器函数：<code>start()</code> 和 <code>process()</code>。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>shader_type particles;

void start() {
	// Place start code here.
}

void process() {
	// Place process code here.
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>与其他着色器类型不同，particle shaders保留了前一帧输出的数据。因此，particle shaders可用于在多帧上发生的复杂效果。</p> <h2 id="渲染模式-3"><a href="#渲染模式-3" class="header-anchor">#</a> 渲染模式</h2> <table><thead><tr><th>渲染模式</th> <th>描述</th> <th>变量的用法</th></tr></thead> <tbody><tr><td>keep_data</td> <td>不要在重启时清除以前的数据</td> <td>-</td></tr> <tr><td>disable_force</td> <td>禁用引力力</td> <td>-</td></tr> <tr><td>disable_velocity</td> <td>忽略 VELOCITY 值</td> <td>-</td></tr></tbody></table> <h2 id="start-和-process-内置"><a href="#start-和-process-内置" class="header-anchor">#</a> start 和 process 内置</h2> <table><thead><tr><th>变量</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td>in float LIFETIME</td> <td>粒子寿命</td> <td>-</td></tr> <tr><td>in float DELTA</td> <td>处理时间差</td> <td>-</td></tr> <tr><td>in uint NUMBER</td> <td>发射开始后的唯一编号</td> <td>-</td></tr> <tr><td>in uint INDEX</td> <td>粒子索引（在所有粒子范围内）</td> <td>-</td></tr> <tr><td>in mat4 EMISSION_TRANSFORM</td> <td>发射器变换（用于非本地坐标系）</td> <td>-</td></tr> <tr><td>in uint RANDOM_SEED</td> <td>随机种子，是随机的基础</td> <td>-</td></tr> <tr><td>inout bool ACTIVE</td> <td>当粒子激活时为 true，可以设置为 false。</td> <td>修改粒子的激活状态</td></tr> <tr><td>inout vec4 COLOR</td> <td>粒子的颜色</td> <td>可以写入 Mesh 的顶点函数中，也可以访问</td></tr> <tr><td>inout vec3 VELOCITY</td> <td>粒子速度</td> <td>可以修改</td></tr> <tr><td>inout mat4 TRANSFORM</td> <td>粒子变换</td> <td>可以修改</td></tr> <tr><td>inout vec4 CUSTOM</td> <td>自定义粒子数据</td> <td>网格的着色器可以使用 INSTANCE_CUSTOM 访问</td></tr> <tr><td>inout float MASS</td> <td>粒子质量，用于引力场等。默认为 1.0。</td> <td>可以修改</td></tr></tbody></table> <h2 id="start专用"><a href="#start专用" class="header-anchor">#</a> start专用</h2> <table><thead><tr><th>变量</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td>in bool RESTART_POSITION</td> <td>是否重新开始位置</td> <td>-</td></tr> <tr><td>in bool RESTART_ROT_SCALE</td> <td>是否重新开始旋转和缩放</td> <td>-</td></tr> <tr><td>in bool RESTART_VELOCITY</td> <td>是否重新开始速度</td> <td>-</td></tr> <tr><td>in bool RESTART_COLOR</td> <td>是否重新开始颜色</td> <td>-</td></tr> <tr><td>in bool RESTART_CUSTOM</td> <td>是否重新开始自定义数据</td> <td>-</td></tr> <tr><td>in bool RESTART_VELOCITY</td> <td>是否重新开始速度</td> <td>-</td></tr></tbody></table> <h2 id="process-专用"><a href="#process-专用" class="header-anchor">#</a> Process 专用</h2> <table><thead><tr><th>变量</th> <th>描述</th> <th>用法</th></tr></thead> <tbody><tr><td>in bool RESTART</td> <td>粒子的当前处理帧是否是第一帧。</td> <td>-</td></tr> <tr><td>in uint FLAG_EMIT_POSITION</td> <td>在 emit_subparticle 函数的最后一个参数上使用的标志，将位置分配给新粒子的变换。</td> <td>-</td></tr> <tr><td>in uint FLAG_EMIT_ROT_SCALE</td> <td>在 emit_subparticle 函数的最后一个参数上使用的标志，将旋转和缩放分配给新粒子的变换。</td> <td>-</td></tr> <tr><td>in uint FLAG_EMIT_VELOCITY</td> <td>在 emit_subparticle 函数的最后一个参数上使用的标志，将速度分配给新粒子。</td> <td>-</td></tr> <tr><td>in uint FLAG_EMIT_COLOR</td> <td>在 emit_subparticle 函数的最后一个参数上使用的标志，将颜色分配给新粒子。</td> <td>-</td></tr> <tr><td>in uint FLAG_EMIT_CUSTOM</td> <td>在 emit_subparticle 函数的最后一个参数上使用的标志，将自定义数据向量分配给新粒子。</td> <td>-</td></tr> <tr><td>in bool COLLIDED</td> <td>当粒子与粒子碰撞器发生碰撞时为 true。</td> <td>-</td></tr> <tr><td>in vec3 COLLISION_NORMAL</td> <td>上次碰撞的法线。如果未检测到碰撞，则为 vec3(0.0)。</td> <td>-</td></tr> <tr><td>in float COLLISION_DEPTH</td> <td>上次碰撞法线的长度。如果未检测到碰撞，则为 0.0。</td> <td>-</td></tr> <tr><td>in vec3 ATTRACTOR_FORCE</td> <td>当前粒子上引力子的合力。</td> <td>-</td></tr> <tr><td>in vec4 USERDATAX</td> <td>使得可以将补充的用户定义数据集成到粒子处理着色器中。 USERDATAX 是由数字标识的六个内置项，X 可以是介于 1 和 6 之间的数字。</td> <td>-</td></tr></tbody></table> <table><thead><tr><th>函数</th> <th>描述</th></tr></thead> <tbody><tr><td>bool emit_subparticle(mat4 xform, vec3 velocity, vec4 color, vec4 custom, uint flags)</td> <td>强制从子发射器发射粒子。</td></tr></tbody></table></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/beiklive/vuepresswiki/edit/main/beiklive/Note_Godot/05.着色器学习（二） 内建变量.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/vuepresswiki/tags/?tag=godot" title="标签">#godot</a><a href="/vuepresswiki/tags/?tag=%E7%9D%80%E8%89%B2%E5%99%A8" title="标签">#着色器</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/05/22, 14:11:38</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c4db/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">着色器学习（一） 基本语法</div></a> <a href="/vuepresswiki/pages/1a7a48141e8f43cbb3dfd1ba71a71c4db/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">着色器学习（三） 内建函数</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/vuepresswiki/pages/1a7a48141e8f43cbbdfd1ba71a71c4db/" class="prev">着色器学习（一） 基本语法</a></span> <span class="next"><a href="/vuepresswiki/pages/1a7a48141e8f43cbb3dfd1ba71a71c4db/">着色器学习（三） 内建函数</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/vuepresswiki/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/vuepresswiki/pages/01b36638f8ef4d59898623ae48047874/"><div>
            爬虫技术与法律风险：个人开发者的注意事项
            <!----></div></a> <span class="date">05-22</span></dt></dl><dl><dd>02</dd> <dt><a href="/vuepresswiki/pages/61fa815ff1644280921a058a0c044367/"><div>
            个人开发者的抉择：个人工作室 vs 公司主体 🤔
            <!----></div></a> <span class="date">05-22</span></dt></dl><dl><dd>03</dd> <dt><a href="/vuepresswiki/pages/2e4c80de76d54f7f8244cbbf6e991628/"><div>
            《计算机网络，自顶向下方法》笔记（一）
            <!----></div></a> <span class="date">05-20</span></dt></dl> <dl><dd></dd> <dt><a href="/vuepresswiki/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1376896787@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/beiklive" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2024-2024
    <span>beiklive | <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">苏ICP备20038092号-2</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/vuepresswiki/assets/js/app.40eac548.js" defer></script><script src="/vuepresswiki/assets/js/2.836013b7.js" defer></script><script src="/vuepresswiki/assets/js/34.87d1c221.js" defer></script>
  </body>
</html>
