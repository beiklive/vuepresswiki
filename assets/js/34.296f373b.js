(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{356:function(_,v,t){"use strict";t.r(v);var d=t(4),e=Object(d.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[_._v("前一篇")]),_._v(" "),v("p",[v("RouterLink",{attrs:{to:"/Note_Godot/04.着色器学习（一）-基本语法.html"}},[_._v("04.着色器学习（一）-基本语法")])],1)]),_._v(" "),v("p",[_._v("在Shader中，有许多内置变量可用，如 UV、COLOR 和 VERTEX。可用的变量取决于着色器的类型（空间、画布项或粒子）以及所使用的函数（vertex、fragment 或 light）。")]),_._v(" "),v("p",[_._v("参考地址：https://docs.godotengine.org/en/4.1/tutorials/shaders/shader_reference/shading_language.html")]),_._v(" "),v("p",[_._v("创建着色器脚本时可以看到有五种着色器类型")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://files-1306865739.cos.ap-beijing.myqcloud.com/202405151353960.webp",alt:"image.png"}})]),_._v(" "),v("h1",{attrs:{id:"空间着色器-spatial"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#空间着色器-spatial"}},[_._v("#")]),_._v(" 空间着色器（Spatial）")]),_._v(" "),v("p",[_._v("空间着色器用于为三维对象着色. 它们是Godot提供的最复杂的着色器类型. 空间着色器是高度可配置的, 具有不同的渲染模式和不同的渲染选项(例如: 次表面散射, 透射, 环境遮挡, 边缘照明等). 用户可以选择编辑顶点, 片段, 和光照处理器功能, 以影响如何绘制对象.")]),_._v(" "),v("p",[_._v(':::info{title="内置标记"}\n标记为 "in" 的值是只读的. 标记为 "out" 的值是可以选择写入的, 不一定包含合理的值. 标记为 "inout" 的值提供一个合理的默认值, 并且可以选择写入. 采样器不是写入的对象, 它们没有被标记.\n:::')]),_._v(" "),v("h2",{attrs:{id:"渲染模式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#渲染模式"}},[_._v("#")]),_._v(" 渲染模式")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("渲染模式")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("blend_mix")])]),_._v(" "),v("td",[_._v("混合混合模式（Alpha 为透明度），默认")]),_._v(" "),v("td",[_._v("在材质中使用，表示混合混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("blend_add")])]),_._v(" "),v("td",[_._v("叠加混合模式")]),_._v(" "),v("td",[_._v("在材质中使用，表示叠加混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("blend_sub")])]),_._v(" "),v("td",[_._v("减法混合模式")]),_._v(" "),v("td",[_._v("在材质中使用，表示减法混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("blend_mul")])]),_._v(" "),v("td",[_._v("乘法混合模式")]),_._v(" "),v("td",[_._v("在材质中使用，表示乘法混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("depth_draw_opaque")])]),_._v(" "),v("td",[_._v("仅绘制不透明几何体的深度")]),_._v(" "),v("td",[_._v("在材质中使用，表示仅绘制不透明几何体的深度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("depth_draw_always")])]),_._v(" "),v("td",[_._v("始终绘制深度")]),_._v(" "),v("td",[_._v("在材质中使用，表示始终绘制深度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("depth_draw_never")])]),_._v(" "),v("td",[_._v("不绘制深度")]),_._v(" "),v("td",[_._v("在材质中使用，表示不绘制深度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("depth_prepass_alpha")])]),_._v(" "),v("td",[_._v("对透明几何体进行不透明的深度处理")]),_._v(" "),v("td",[_._v("在材质中使用，表示对透明几何体进行不透明的深度处理。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("depth_test_disabled")])]),_._v(" "),v("td",[_._v("禁用深度测试")]),_._v(" "),v("td",[_._v("在材质中使用，表示禁用深度测试。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("sss_mode_skin")])]),_._v(" "),v("td",[_._v("Subsurface Scattering mode for skin")]),_._v(" "),v("td",[_._v("在材质中使用，表示皮肤的亚表面散射模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("cull_back")])]),_._v(" "),v("td",[_._v("剔除背面（默认）")]),_._v(" "),v("td",[_._v("在材质中使用，表示剔除背面。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("cull_front")])]),_._v(" "),v("td",[_._v("剔除正面")]),_._v(" "),v("td",[_._v("在材质中使用，表示剔除正面。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("cull_disabled")])]),_._v(" "),v("td",[_._v("禁用剔除（双面）")]),_._v(" "),v("td",[_._v("在材质中使用，表示禁用剔除，渲染双面。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("unshaded")])]),_._v(" "),v("td",[_._v("结果只使用反照率")]),_._v(" "),v("td",[_._v("在材质中使用，表示结果只使用反照率，不考虑照明和阴影。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("wireframe")])]),_._v(" "),v("td",[_._v("Geometry draws using lines")]),_._v(" "),v("td",[_._v("在材质中使用，表示以线框模式绘制几何体。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("diffuse_lambert")])]),_._v(" "),v("td",[_._v("漫反射使用 Lambert 着色（默认）")]),_._v(" "),v("td",[_._v("在材质中使用，表示漫反射使用 Lambert 着色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("diffuse_lambert_wrap")])]),_._v(" "),v("td",[_._v("漫反射使用 Lambert 环绕（受粗糙度影响）")]),_._v(" "),v("td",[_._v("在材质中使用，表示漫反射使用 Lambert 环绕，受粗糙度影响。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("diffuse_burley")])]),_._v(" "),v("td",[_._v("漫反射使用 Burley（迪士尼 PBS）")]),_._v(" "),v("td",[_._v("在材质中使用，表示漫反射使用 Burley（迪士尼 PBS）。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("diffuse_toon")])]),_._v(" "),v("td",[_._v("漫反射使用卡通着色")]),_._v(" "),v("td",[_._v("在材质中使用，表示漫反射使用卡通着色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("specular_schlick_ggx")])]),_._v(" "),v("td",[_._v("镜面反射使用 Schlick-GGX（默认）")]),_._v(" "),v("td",[_._v("在材质中使用，表示镜面反射使用 Schlick-GGX。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("specular_blinn")])]),_._v(" "),v("td",[_._v("镜面反射使用 Blinn（兼容）")]),_._v(" "),v("td",[_._v("在材质中使用，表示镜面反射使用 Blinn。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("specular_phong")])]),_._v(" "),v("td",[_._v("镜面反射使用 Phong（兼容）")]),_._v(" "),v("td",[_._v("在材质中使用，表示镜面反射使用 Phong。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("specular_toon")])]),_._v(" "),v("td",[_._v("镜面反射使用 Toon")]),_._v(" "),v("td",[_._v("在材质中使用，表示镜面反射使用 Toon。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("specular_disabled")])]),_._v(" "),v("td",[_._v("禁用镜面反射")]),_._v(" "),v("td",[_._v("在材质中使用，表示禁用镜面反射。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("skip_vertex_transform")])]),_._v(" "),v("td",[_._v("VERTEX/NORMAL等需要在顶点函数中手动进行转换")]),_._v(" "),v("td",[_._v("在材质中使用，表示在顶点函数中手动进行顶点转换。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("world_vertex_coords")])]),_._v(" "),v("td",[_._v("VERTEX/NORMAL等是以世界坐标而不是局部坐标修改的")]),_._v(" "),v("td",[_._v("在材质中使用，表示使用世界坐标而不是局部坐标进行修改。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("ensure_correct_normals")])]),_._v(" "),v("td",[_._v("当对网格应用非均匀尺度时")]),_._v(" "),v("td",[_._v("在材质中使用，表示在对网格应用非均匀尺度时确保正确的法线。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("shadows_disabled")])]),_._v(" "),v("td",[_._v("在着色器中禁用阴影计算")]),_._v(" "),v("td",[_._v("在材质中使用，表示在着色器中禁用阴影计算。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("ambient_light_disabled")])]),_._v(" "),v("td",[_._v("禁用环境光和辐射度图的收益")]),_._v(" "),v("td",[_._v("在材质中使用，表示禁用环境光和辐射度图的收益。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("shadow_to_opacity")])]),_._v(" "),v("td",[_._v("光照会改变alpha值, 阴影部分是不透明的, 而没有阴影的地方是透明的")]),_._v(" "),v("td",[_._v("在材质中使用，表示光照会改变alpha值，阴影部分是不透明的，没有")])])])]),_._v(" "),v("h2",{attrs:{id:"全局内置"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#全局内置"}},[_._v("#")]),_._v(" 全局内置")]),_._v(" "),v("p",[_._v("全局内置的功能随处可见, 包括自定义功能.")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("常数")]),_._v(" "),v("th",[_._v("描述")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("in float TIME")])]),_._v(" "),v("td",[_._v("全局时间，以秒为单位。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in float PI")])]),_._v(" "),v("td",[_._v("PI常数（3.141592）。圆周率与直径比例和半圈弧度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in float TAU")])]),_._v(" "),v("td",[_._v("TAU常数（6.283185）。等同于PI * 2，表示整圈的弧度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in float E")])]),_._v(" "),v("td",[_._v("E常数（2.718281）。欧拉数和自然对数的底。")])])])]),_._v(" "),v("h2",{attrs:{id:"顶点内置"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#顶点内置"}},[_._v("#")]),_._v(" 顶点内置")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法示例")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("in vec2 VIEWPORT_SIZE")])]),_._v(" "),v("td",[_._v("视口大小（单位为像素）。")]),_._v(" "),v("td",[_._v("用于获取当前渲染视口的大小。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 VIEW_MATRIX")])]),_._v(" "),v("td",[_._v("世界空间向视图空间的转换。")]),_._v(" "),v("td",[_._v("用于将顶点从世界空间变换到视图空间。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 INV_VIEW_MATRIX")])]),_._v(" "),v("td",[_._v("视图空间向世界空间的转换。")]),_._v(" "),v("td",[_._v("用于将顶点从视图空间变换回世界空间。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 INV_PROJECTION_MATRIX")])]),_._v(" "),v("td",[_._v("裁剪空间向视图空间的转换。")]),_._v(" "),v("td",[_._v("用于将顶点从裁剪空间变换到视图空间。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 NODE_POSITION_WORLD")])]),_._v(" "),v("td",[_._v("Node在世界空间的位置。")]),_._v(" "),v("td",[_._v("用于获取Node在世界空间中的位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 NODE_POSITION_VIEW")])]),_._v(" "),v("td",[_._v("Node在视图空间的位置。")]),_._v(" "),v("td",[_._v("用于获取Node在视图空间中的位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 CAMERA_POSITION_WORLD")])]),_._v(" "),v("td",[_._v("相机在世界空间的位置。")]),_._v(" "),v("td",[_._v("用于获取相机在世界空间中的位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 CAMERA_DIRECTION_WORLD")])]),_._v(" "),v("td",[_._v("相机在世界空间的方向。")]),_._v(" "),v("td",[_._v("用于获取相机在世界空间中的方向。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in bool OUTPUT_IS_SRGB")])]),_._v(" "),v("td",[_._v("当输出在sRGB颜色空间中时为true（在Compatibility渲染器中为true，在Forward+和Forward Mobile中为false）。")]),_._v(" "),v("td",[_._v("用于检查当前输出是否在sRGB颜色空间中。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in int INSTANCE_ID")])]),_._v(" "),v("td",[_._v("实例化的实例ID。")]),_._v(" "),v("td",[_._v("用于获取当前实例的ID。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 INSTANCE_CUSTOM")])]),_._v(" "),v("td",[_._v("实例的自定义数据（主要用于粒子）。")]),_._v(" "),v("td",[_._v("用于获取实例的自定义数据。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in int VIEW_INDEX")])]),_._v(" "),v("td",[_._v("正在渲染的视图。 VIEW_MONO_LEFT（0）表示单视图或左眼，VIEW_RIGHT（1）表示右眼。")]),_._v(" "),v("td",[_._v("用于获取当前渲染的视图索引。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in int VIEW_MONO_LEFT")])]),_._v(" "),v("td",[_._v("单视图或左眼的常量，始终为0。")]),_._v(" "),v("td",[_._v("用于比较当前视图是否为单视图或左眼。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in int VIEW_RIGHT")])]),_._v(" "),v("td",[_._v("右眼的常量，始终为1。")]),_._v(" "),v("td",[_._v("用于比较当前视图是否为右眼。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 EYE_OFFSET")])]),_._v(" "),v("td",[_._v("正在渲染的眼睛的位置偏移。仅适用于多视图渲染。")]),_._v(" "),v("td",[_._v("用于获取当前渲染眼睛的位置偏移。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 VERTEX")])]),_._v(" "),v("td",[_._v("顶点在局部坐标中。")]),_._v(" "),v("td",[_._v("用于修改或使用局部坐标中的顶点位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in int VERTEX_ID")])]),_._v(" "),v("td",[_._v("顶点缓冲区中当前顶点的索引。")]),_._v(" "),v("td",[_._v("用于获取当前顶点在顶点缓冲区中的索引。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 NORMAL")])]),_._v(" "),v("td",[_._v("局部坐标法线。")]),_._v(" "),v("td",[_._v("用于修改或使用局部坐标中的法线。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 TANGENT")])]),_._v(" "),v("td",[_._v("局部坐标切线。")]),_._v(" "),v("td",[_._v("用于修改或使用局部坐标中的切线。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 BINORMAL")])]),_._v(" "),v("td",[_._v("局部坐标次法线。")]),_._v(" "),v("td",[_._v("用于修改或使用局部坐标中的次法线。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec4 POSITION")])]),_._v(" "),v("td",[_._v("如果写入，则覆盖最终顶点位置。")]),_._v(" "),v("td",[_._v("用于手动设置顶点的最终位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec2 UV")])]),_._v(" "),v("td",[_._v("主UV通道。")]),_._v(" "),v("td",[_._v("用于修改或使用主UV通道的坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec2 UV2")])]),_._v(" "),v("td",[_._v("辅助UV通道。")]),_._v(" "),v("td",[_._v("用于修改或使用辅助UV通道的坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec4 COLOR")])]),_._v(" "),v("td",[_._v("顶点颜色。")]),_._v(" "),v("td",[_._v("用于修改或使用顶点的颜色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float ROUGHNESS")])]),_._v(" "),v("td",[_._v("顶点照明的粗糙度。")]),_._v(" "),v("td",[_._v("用于手动设置顶点的照明粗糙度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout float POINT_SIZE")])]),_._v(" "),v("td",[_._v("点渲染的点大小。")]),_._v(" "),v("td",[_._v("用于修改或使用点渲染的点大小。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout mat4 MODELVIEW_MATRIX")])]),_._v(" "),v("td",[_._v("模型空间向视图空间的变换（如果可用）。")]),_._v(" "),v("td",[_._v("用于修改或使用模型空间到视图空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout mat3 MODELVIEW_NORMAL_MATRIX")])]),_._v(" "),v("td",[_._v("模型空间到视图空间的法线矩阵。")]),_._v(" "),v("td",[_._v("用于修改或使用模型空间到视图空间的法线矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout mat4 MODEL_MATRIX")])]),_._v(" "),v("td",[_._v("模型空间到世界空间的变换。")]),_._v(" "),v("td",[_._v("用于修改或使用模型空间到世界空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout mat3 MODEL_NORMAL_MATRIX")])]),_._v(" "),v("td",[_._v("模型空间到世界空间的法线矩阵。")]),_._v(" "),v("td",[_._v("用于修改或使用模型空间到世界空间的法线矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout mat4 PROJECTION_MATRIX")])]),_._v(" "),v("td",[_._v("视图空间到裁剪空间的变换。")]),_._v(" "),v("td",[_._v("用于修改或使用视图空间到裁剪空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout uvec4 BONE_INDICES")])]),_._v(" "),v("td",[_._v("骨骼索引（用于蒙皮动画）。")]),_._v(" "),v("td",[_._v("用于修改或使用顶点的骨骼索引。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec4 BONE_WEIGHTS")])]),_._v(" "),v("td",[_._v("骨骼权重（用于蒙皮动画）。")]),_._v(" "),v("td",[_._v("用于修改或使用顶点的骨骼权重。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 CUSTOM0")])]),_._v(" "),v("td",[_._v("自定义数据0。")]),_._v(" "),v("td",[_._v("用于获取顶点的自定义数据0。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 CUSTOM1")])]),_._v(" "),v("td",[_._v("自定义数据1。")]),_._v(" "),v("td",[_._v("用于获取顶点的自定义数据1。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 CUSTOM2")])]),_._v(" "),v("td",[_._v("自定义数据2。")]),_._v(" "),v("td",[_._v("用于获取顶点的自定义数据2。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 CUSTOM3")])]),_._v(" "),v("td",[_._v("自定义数据3。")]),_._v(" "),v("td",[_._v("用于获取顶点的自定义数据3。")])])])]),_._v(" "),v("h2",{attrs:{id:"片断内置"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#片断内置"}},[_._v("#")]),_._v(" 片断内置")]),_._v(" "),v("p",[_._v("Godot片段处理器函数的默认用法是设置对象的材质属性, 并让内置渲染器处理最终的阴影. 但是, 你无需使用所有这些属性, 如果你不写入它们,Godot将优化掉相应的功能.")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量名")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("in vec2 VIEWPORT_SIZE")])]),_._v(" "),v("td",[_._v("视口大小（单位为像素）")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前渲染目标的像素大小。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 FRAGCOORD")])]),_._v(" "),v("td",[_._v("屏幕空间中像素中心的坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前像素的屏幕空间坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in bool FRONT_FACING")])]),_._v(" "),v("td",[_._v("是否为正面面")]),_._v(" "),v("td",[_._v("在片段着色器中使用，表示当前片段是否为正面面。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 VIEW")])]),_._v(" "),v("td",[_._v("从片段位置到摄像机的规范化向量（视图空间）")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从片段到摄像机的方向。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 UV")])]),_._v(" "),v("td",[_._v("顶点功能传递的纹理坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从顶点功能传递的主纹理坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 UV2")])]),_._v(" "),v("td",[_._v("顶点功能传递的第二组纹理坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从顶点功能传递的辅助纹理坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 COLOR")])]),_._v(" "),v("td",[_._v("顶点功能传递的颜色")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从顶点功能传递的颜色信息。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 POINT_COORD")])]),_._v(" "),v("td",[_._v("用 "),v("code",[_._v("POINT_SIZE")]),_._v(" 绘制的点坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示用 "),v("code",[_._v("POINT_SIZE")]),_._v(" 绘制的点的坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in bool OUTPUT_IS_SRGB")])]),_._v(" "),v("td",[_._v("输出是否在sRGB颜色空间")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前输出是否在sRGB颜色空间。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 MODEL_MATRIX")])]),_._v(" "),v("td",[_._v("模型空间到世界空间变换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从模型空间到世界空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat3 MODEL_NORMAL_MATRIX")])]),_._v(" "),v("td",[_._v("模型空间法线矩阵")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从模型空间到世界空间的法线矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 VIEW_MATRIX")])]),_._v(" "),v("td",[_._v("世界空间向视图空间转变")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从世界空间到视图空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 INV_VIEW_MATRIX")])]),_._v(" "),v("td",[_._v("视图空间向世界空间变换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从视图空间到世界空间的逆变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 PROJECTION_MATRIX")])]),_._v(" "),v("td",[_._v("视图空间向裁剪空间变换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从视图空间到裁剪空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 INV_PROJECTION_MATRIX")])]),_._v(" "),v("td",[_._v("裁剪空间向视图空间变换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从裁剪空间到视图空间的逆变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 NODE_POSITION_WORLD")])]),_._v(" "),v("td",[_._v("Node位置，世界空间")]),_._v(" "),v("td",[_._v("在着色器中使用，表示Node在世界空间中的位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 NODE_POSITION_VIEW")])]),_._v(" "),v("td",[_._v("Node位置，视图空间")]),_._v(" "),v("td",[_._v("在着色器中使用，表示Node在视图空间中的位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 CAMERA_POSITION_WORLD")])]),_._v(" "),v("td",[_._v("Camera位置，世界空间")]),_._v(" "),v("td",[_._v("在着色器中使用，表示摄像机在世界空间中的位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 CAMERA_DIRECTION_WORLD")])]),_._v(" "),v("td",[_._v("Camera方向，世界空间")]),_._v(" "),v("td",[_._v("在着色器中使用，表示摄像机在世界空间中的方向。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 VERTEX")])]),_._v(" "),v("td",[_._v("顶点，视图空间 (默认情况下)")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前顶点的位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in int VIEW_INDEX")])]),_._v(" "),v("td",[_._v("渲染的视图索引")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前渲染的视图索引。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in int VIEW_MONO_LEFT")])]),_._v(" "),v("td",[_._v("单眼或左眼的常量，始终为0")]),_._v(" "),v("td",[_._v("在着色器中使用，表示单眼或左眼的常量，始终为0。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in int VIEW_RIGHT")])]),_._v(" "),v("td",[_._v("右眼的常量，始终为1")]),_._v(" "),v("td",[_._v("在着色器中使用，表示右眼的常量，始终为1。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 EYE_OFFSET")])]),_._v(" "),v("td",[_._v("渲染的眼睛的位置偏移")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前渲染眼睛的位置偏移。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("sampler2D SCREEN_TEXTURE")])]),_._v(" "),v("td",[_._v("在Godot 4中已删除，使用带有hint_screen_texture的sampler2D")]),_._v(" "),v("td",[_._v("在Godot 3.x中使用，表示屏幕纹理。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 SCREEN_UV")])]),_._v(" "),v("td",[_._v("当前像素的屏幕UV坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前像素在屏幕上的UV坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("sampler2D DEPTH_TEXTURE")])]),_._v(" "),v("td",[_._v("在Godot 4中已删除，使用带有hint_depth_texture的sampler2D")]),_._v(" "),v("td",[_._v("在Godot 3.x中使用，表示深度纹理。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float DEPTH")])]),_._v(" "),v("td",[_._v("自定义深度值 (0..1)")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前像素的深度值。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 NORMAL")])]),_._v(" "),v("td",[_._v("顶点函数中的法线向量 (默认为视图空间)")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前顶点的法线向量。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 TANGENT")])]),_._v(" "),v("td",[_._v("顶点函数中的切线")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前顶点的切线。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 BINORMAL")])]),_._v(" "),v("td",[_._v("顶点函数中的Binormal")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前顶点的Binormal。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec3 NORMAL_MAP")])]),_._v(" "),v("td",[_._v("从纹理中读取法线而不是NORMAL的法线")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从法线纹理中读取的法线。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float NORMAL_MAP_DEPTH")])]),_._v(" "),v("td",[_._v("法线图的深度值，默认为1.0")]),_._v(" "),v("td",[_._v("在着色器中使用，表示法线图的深度值，通常为1.0。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec3 ALBEDO")])]),_._v(" "),v("td",[_._v("反射颜色 (默认为白色)")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前像素的反射颜色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float ALPHA")])]),_._v(" "),v("td",[_._v("Alpha 值 (0..1)")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前像素的Alpha值。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float ALPHA_SCISSOR_THRESHOLD")])]),_._v(" "),v("td",[_._v("Alpha 剪裁阈值")]),_._v(" "),v("td",[_._v("在着色器中使用，表示Alpha剪裁的阈值。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float ALPHA_HASH_SCALE")])]),_._v(" "),v("td",[_._v("Alpha哈希刻度")]),_._v(" "),v("td",[_._v("在着色器中使用，表示Alpha哈希的刻度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float ALPHA_ANTIALIASING_EDGE")])]),_._v(" "),v("td",[_._v("Alpha边缘抗锯齿")]),_._v(" "),v("td",[_._v("在着色器中使用，表示Alpha边缘抗锯齿。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec2 ALPHA_TEXTURE_COORDINATE")])]),_._v(" "),v("td",[_._v("Alpha纹理坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示Alpha纹理的坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float METALLIC")])]),_._v(" "),v("td",[_._v("金属性（0..1）")]),_._v(" "),v("td",[_._v("在着色器中使用，表示金属性。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float SPECULAR")])]),_._v(" "),v("td",[_._v("镜面反射，默认为0.5，最好不要修改")]),_._v(" "),v("td",[_._v("在着色器中使用，表示镜面反射，最好不要修改除非你想改变IOR。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float ROUGHNESS")])]),_._v(" "),v("td",[_._v("粗糙度（0..1）")]),_._v(" "),v("td",[_._v("在着色器中使用，表示粗糙度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float RIM")])]),_._v(" "),v("td",[_._v("边缘（0-1区间），Godot计算边缘照明")]),_._v(" "),v("td",[_._v("在着色器中使用，表示边缘，如果使用，Godot将计算边缘照明。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float RIM_TINT")])]),_._v(" "),v("td",[_._v("边缘色调，从0(白色)到1(反射)，Godot计算边缘光照")]),_._v(" "),v("td",[_._v("在着色器中使用，表示边缘色调，如果使用，Godot将计算边缘光照。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float CLEARCOAT")])]),_._v(" "),v("td",[_._v("小幅增加镜面反射斑点，Godot计算清漆涂层")]),_._v(" "),v("td",[_._v("在着色器中使用，表示清漆涂层。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float CLEARCOAT_GLOSS")])]),_._v(" "),v("td",[_._v("清漆涂层的光泽度，Godot计算清漆涂层")]),_._v(" "),v("td",[_._v("在着色器中使用，表示清漆涂层的光泽度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float ANISOTROPY")])]),_._v(" "),v("td",[_._v("用于根据切线空间扭曲镜面反射斑点")]),_._v(" "),v("td",[_._v("在着色器中使用，表示根据切线空间扭曲的镜面反射斑点。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec2 ANISOTROPY_FLOW")])]),_._v(" "),v("td",[_._v("失真方向，与流程图一起使用")]),_._v(" "),v("td",[_._v("在着色器中使用，表示失真方向，与流程图一起使用。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float SSS_STRENGTH")])]),_._v(" "),v("td",[_._v("次表面散射强度，如果使用，物体将应用次表面散射")]),_._v(" "),v("td",[_._v("在着色器中使用，表示次表面散射强度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec4 SSS_TRANSMITTANCE_COLOR")])]),_._v(" "),v("td",[_._v("次表面散射透射颜色")]),_._v(" "),v("td",[_._v("在着色器中使用，表示次表面散射透射颜色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float SSS_TRANSMITTANCE_DEPTH")])]),_._v(" "),v("td",[_._v("次表面散射透射深度")]),_._v(" "),v("td",[_._v("在着色器中使用，表示次表面散射透射深度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float SSS_TRANSMITTANCE_BOOST")])]),_._v(" "),v("td",[_._v("次表面散射透射增强")]),_._v(" "),v("td",[_._v("在着色器中使用，表示次表面散射透射增强。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 BACKLIGHT")])]),_._v(" "),v("td",[_._v("反光光照")]),_._v(" "),v("td",[_._v("在着色器中使用，表示反光光照。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float AO")])]),_._v(" "),v("td",[_._v("环境遮挡")]),_._v(" "),v("td",[_._v("在着色器中使用，表示环境遮挡，通常与预焙环境遮挡一起使用。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float AO_LIGHT_AFFECT")])]),_._v(" "),v("td",[_._v("环境遮挡对灯光的影响程度，取值在0到1之间， 默认为0")]),_._v(" "),v("td",[_._v("在着色器中使用，表示环境遮挡对灯光的影响程度，通常在0到1之间， 默认为0。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec3 EMISSION")])]),_._v(" "),v("td",[_._v("发射颜色(HDR可以超过1,1,1)")]),_._v(" "),v("td",[_._v("在着色器中使用，表示发射颜色，通常用于HDR，可以超过1,1,1。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec4 FOG")])]),_._v(" "),v("td",[_._v("如果写入，基于FOG.a，将最终像素颜色与FOG.rgb混合")]),_._v(" "),v("td",[_._v("在着色器中使用，表示雾效果，如果写入，基于FOG.a，将最终像素颜色与FOG.rgb混合。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec4 RADIANCE")])]),_._v(" "),v("td",[_._v("如果写入，基于RADIANCE.a，将环境贴图辐射与RADIANCE.rgb混合")]),_._v(" "),v("td",[_._v("在着色器中使用，表示环境贴图辐射，如果写入，基于RADIANCE.a，将环境贴图辐射与RADIANCE.rgb混合。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec4 IRRADIANCE")])]),_._v(" "),v("td",[_._v("如果写入，基于IRRADIANCE.a，将环境贴图辐射与IRRADIANCE.rgb混合")]),_._v(" "),v("td",[_._v("在着色器中使用，表示环境贴图辐射，如果写入，基于IRRADIANCE.a，将环境贴图辐射与IRRADIANCE.rgb混合。")])])])]),_._v(" "),v("h2",{attrs:{id:"内置灯光"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#内置灯光"}},[_._v("#")]),_._v(" 内置灯光")]),_._v(" "),v("p",[_._v("编写光处理器功能是完全可选的。您可以通过设置 render_mode 为 "),v("code",[_._v("unshaded")]),_._v(" 来跳过光照函数。如果没有写入光照函数，Godot 将使用片段函数中写入的材质属性来为您计算光照（取决于 render_mode）。")]),_._v(" "),v("p",[_._v("要写一个光照函数，要给 "),v("code",[_._v("DIFFUSE_LIGHT")]),_._v(" 或 "),v("code",[_._v("SPECULAR_LIGHT")]),_._v(" 指定一些东西。不指定任何东西意味着不处理光照。")]),_._v(" "),v("p",[_._v("每个像素中的每个光都调用光照函数. 在每个光类型的循环中被调用.")]),_._v(" "),v("p",[_._v("下面是一个使用兰伯特光照模型的自定义光函数的例子:")]),_._v(" "),v("div",{staticClass:"language-js line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[v("span",{pre:!0,attrs:{class:"token keyword"}},[_._v("void")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[_._v("light")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(")")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("{")]),_._v("\n    "),v("span",{pre:!0,attrs:{class:"token constant"}},[_._v("DIFFUSE_LIGHT")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("+=")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[_._v("clamp")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("(")]),v("span",{pre:!0,attrs:{class:"token function"}},[_._v("dot")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("(")]),v("span",{pre:!0,attrs:{class:"token constant"}},[_._v("NORMAL")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token constant"}},[_._v("LIGHT")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("0.0")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[_._v("1.0")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(")")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("*")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token constant"}},[_._v("ATTENUATION")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("*")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token constant"}},[_._v("ALBEDO")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(";")]),_._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("}")]),_._v("\n")])]),_._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[_._v("1")]),v("br"),v("span",{staticClass:"line-number"},[_._v("2")]),v("br"),v("span",{staticClass:"line-number"},[_._v("3")]),v("br")])]),v("p",[_._v("如果你想把这些光照加在一起，请使用 "),v("code",[_._v("+=")]),_._v(" 运算符将光线添加到 "),v("code",[_._v("DIFFUSE_LIGHT")]),_._v(" 函数中，不要覆盖它。")]),_._v(" "),v("p",[_._v(':::warning{title="注意"}\n如果启用了 '),v("code",[_._v("vertex_lighting")]),_._v(" 渲染模式, 或者在项目设置中启用了 "),v("em",[v("strong",[_._v("Rendering渲染>Quality质量>Shading着色>强制顶点着色")])]),_._v(" , 则不会运行 "),v("code",[_._v("light()")]),_._v(" 函数.(在移动平台上默认启用.)\n:::")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量名")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("in vec2 VIEWPORT_SIZE")])]),_._v(" "),v("td",[_._v("视口大小（单位为像素）")]),_._v(" "),v("td",[_._v("在着色器中使用，表示视口大小，以像素为单位。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 FRAGCOORD")])]),_._v(" "),v("td",[_._v("屏幕空间中像素中心的坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示像素中心的屏幕空间坐标，包括窗口位置和深度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 MODEL_MATRIX")])]),_._v(" "),v("td",[_._v("模型空间到世界空间变换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示模型空间到世界空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 INV_VIEW_MATRIX")])]),_._v(" "),v("td",[_._v("视图空间向世界空间变换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示视图空间向世界空间的逆变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 VIEW_MATRIX")])]),_._v(" "),v("td",[_._v("世界空间向视图空间转变")]),_._v(" "),v("td",[_._v("在着色器中使用，表示世界空间到视图空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 PROJECTION_MATRIX")])]),_._v(" "),v("td",[_._v("视图空间向裁剪空间变换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示视图空间向裁剪空间的变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 INV_PROJECTION_MATRIX")])]),_._v(" "),v("td",[_._v("裁剪空间向视图空间变换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示裁剪空间向视图空间的逆变换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 NORMAL")])]),_._v(" "),v("td",[_._v("法向量，在视图空间中")]),_._v(" "),v("td",[_._v("在着色器中使用，表示法向量，通常在视图空间中。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 UV")])]),_._v(" "),v("td",[_._v("来自顶点功能的UV")]),_._v(" "),v("td",[_._v("在着色器中使用，表示来自顶点功能的UV坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 UV2")])]),_._v(" "),v("td",[_._v("来自顶点功能的UV2")]),_._v(" "),v("td",[_._v("在着色器中使用，表示来自顶点功能的UV2坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 VIEW")])]),_._v(" "),v("td",[_._v("视图向量，在视图空间中")]),_._v(" "),v("td",[_._v("在着色器中使用，表示视图向量，通常在视图空间中。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 LIGHT")])]),_._v(" "),v("td",[_._v("灯光向量，在视图空间中")]),_._v(" "),v("td",[_._v("在着色器中使用，表示灯光向量，通常在视图空间中。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 LIGHT_COLOR")])]),_._v(" "),v("td",[_._v("Color of light multiplied by energy * PI")]),_._v(" "),v("td",[_._v("在着色器中使用，表示经过能量和PI乘法后的光的颜色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in float SPECULAR_AMOUNT")])]),_._v(" "),v("td",[_._v("2.0 * light_specular property for OmniLight3D and SpotLight3D. 1.0 for DirectionalLight3D")]),_._v(" "),v("td",[_._v("在着色器中使用，表示OmniLight3D和SpotLight3D的2.0 * light_specular属性，DirectionalLight3D的值为1.0。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in bool LIGHT_IS_DIRECTIONAL")])]),_._v(" "),v("td",[_._v("true if this pass is a DirectionalLight3D")]),_._v(" "),v("td",[_._v("在着色器中使用，表示此通道是否为DirectionalLight3D。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in float ATTENUATION")])]),_._v(" "),v("td",[_._v("基于距离或阴影的衰减")]),_._v(" "),v("td",[_._v("在着色器中使用，表示基于距离或阴影的衰减值。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 ALBEDO")])]),_._v(" "),v("td",[_._v("基础反射")]),_._v(" "),v("td",[_._v("在着色器中使用，表示基础反射值。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 BACKLIGHT")])]),_._v(" "),v("td"),_._v(" "),v("td",[_._v("在着色器中使用，表示背光效果。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in float METALLIC")])]),_._v(" "),v("td",[_._v("Metallic")]),_._v(" "),v("td",[_._v("在着色器中使用，表示金属度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in float ROUGHNESS")])]),_._v(" "),v("td",[_._v("粗糙度")]),_._v(" "),v("td",[_._v("在着色器中使用，表示粗糙度值。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in bool OUTPUT_IS_SRGB")])]),_._v(" "),v("td",[_._v("true when output is in sRGB color space")]),_._v(" "),v("td",[_._v("在着色器中使用，表示输出是否在sRGB颜色空间中。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec3 DIFFUSE_LIGHT")])]),_._v(" "),v("td",[_._v("漫射光效果")]),_._v(" "),v("td",[_._v("在着色器中使用，表示漫射光效果。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec3 SPECULAR_LIGHT")])]),_._v(" "),v("td",[_._v("镜面反射光效果")]),_._v(" "),v("td",[_._v("在着色器中使用，表示镜面反射光效果。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float ALPHA")])]),_._v(" "),v("td",[_._v("Alpha (0..1);如果写入, 材质将进入透明管道")]),_._v(" "),v("td",[_._v("在着色器中使用，表示Alpha通道值，如果写入，材质将进入透明管道。")])])])]),_._v(" "),v("hr"),_._v(" "),v("h1",{attrs:{id:"画布物品着色器-canvasitem"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#画布物品着色器-canvasitem"}},[_._v("#")]),_._v(" 画布物品着色器 (CanvasItem)")]),_._v(" "),v("p",[_._v("画布组件着色器用于绘制Godot中的所有二维元素. 这包括从画布组件继承的所有节点, 以及所有图形用户界面元素.")]),_._v(" "),v("p",[_._v("画布组件着色器比空间着色器包含更少的内置变量和功能, 但它们与顶点, 片段和光处理器功能保持相同的基本结构.")]),_._v(" "),v("h2",{attrs:{id:"渲染模式-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#渲染模式-2"}},[_._v("#")]),_._v(" 渲染模式")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("渲染模式")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("blend_mix")])]),_._v(" "),v("td",[_._v("混合混合模式（Alpha 为透明度），默认")]),_._v(" "),v("td",[_._v("在材质中使用，表示混合混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("blend_add")])]),_._v(" "),v("td",[_._v("叠加混合模式")]),_._v(" "),v("td",[_._v("在材质中使用，表示叠加混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("blend_sub")])]),_._v(" "),v("td",[_._v("减法混合模式")]),_._v(" "),v("td",[_._v("在材质中使用，表示减法混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("blend_mul")])]),_._v(" "),v("td",[_._v("乘法混合模式")]),_._v(" "),v("td",[_._v("在材质中使用，表示乘法混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("blend_premul_alpha")])]),_._v(" "),v("td",[_._v("预乘 Alpha 混合模式")]),_._v(" "),v("td",[_._v("在材质中使用，表示预乘 Alpha 混合模式。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("blend_disabled")])]),_._v(" "),v("td",[_._v("禁用混合，值（包括 Alpha）会按原样写入")]),_._v(" "),v("td",[_._v("在材质中使用，表示禁用混合，值（包括 Alpha）会按原样写入。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("unshaded")])]),_._v(" "),v("td",[_._v("结果只使用反照率")]),_._v(" "),v("td",[_._v("在材质中使用，表示结果只使用反照率，不考虑照明和阴影。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("light_only")])]),_._v(" "),v("td",[_._v("仅在光通过时绘制")]),_._v(" "),v("td",[_._v("在材质中使用，表示仅在光通过时绘制。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("skip_vertex_transform")])]),_._v(" "),v("td",[_._v("VERTEX/NORMAL/等需要在顶点函数中手动转换")]),_._v(" "),v("td",[_._v("在材质中使用，表示在顶点函数中手动进行顶点转换。")])])])]),_._v(" "),v("h2",{attrs:{id:"顶点内置-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#顶点内置-2"}},[_._v("#")]),_._v(" 顶点内置")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("in mat4 MODEL_MATRIX")])]),_._v(" "),v("td",[_._v("局部坐标到世界坐标的转换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示局部坐标到世界坐标的转换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 CANVAS_MATRIX")])]),_._v(" "),v("td",[_._v("世界坐标到画布坐标的转换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示世界坐标到画布坐标的转换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in mat4 SCREEN_MATRIX")])]),_._v(" "),v("td",[_._v("画布坐标到裁剪坐标的转换")]),_._v(" "),v("td",[_._v("在着色器中使用，表示画布坐标到裁剪坐标的转换矩阵。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 INSTANCE_CUSTOM")])]),_._v(" "),v("td",[_._v("实例自定义数据")]),_._v(" "),v("td",[_._v("在着色器中使用，表示实例自定义数据。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in bool AT_LIGHT_PASS")])]),_._v(" "),v("td",[_._v("始终为false")]),_._v(" "),v("td",[_._v("在着色器中使用，表示始终为false。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 TEXTURE_PIXEL_SIZE")])]),_._v(" "),v("td",[_._v("默认2D纹理的规范化像素大小")]),_._v(" "),v("td",[_._v("在着色器中使用，表示默认2D纹理的规范化像素大小。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec2 VERTEX")])]),_._v(" "),v("td",[_._v("图像空间中的顶点")]),_._v(" "),v("td",[_._v("在着色器中使用，表示图像空间中的顶点。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec2 UV")])]),_._v(" "),v("td",[_._v("规范化的纹理坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示规范化的纹理坐标，范围从0到1。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec4 COLOR")])]),_._v(" "),v("td",[_._v("来自顶点原语的颜色")]),_._v(" "),v("td",[_._v("在着色器中使用，表示来自顶点原语的颜色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout float POINT_SIZE")])]),_._v(" "),v("td",[_._v("点绘图的点大小")]),_._v(" "),v("td",[_._v("在着色器中使用，表示点绘图的点大小。")])])])]),_._v(" "),v("h2",{attrs:{id:"片段内置"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#片段内置"}},[_._v("#")]),_._v(" 片段内置")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("in vec4 FRAGCOORD")])]),_._v(" "),v("td",[_._v("像素中心的坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示像素中心的坐标。在屏幕空间中，xy 表示窗口中的位置，如果没有用 DEPTH，则 z 表示片段深度。原点位于左下角。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 SCREEN_PIXEL_SIZE")])]),_._v(" "),v("td",[_._v("单个像素的大小")]),_._v(" "),v("td",[_._v("在着色器中使用，表示单个像素的大小。等于分辨率的倒数。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 POINT_COORD")])]),_._v(" "),v("td",[_._v("所绘制点的坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示所绘制点的坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("sampler2D TEXTURE")])]),_._v(" "),v("td",[_._v("默认的2D纹理")]),_._v(" "),v("td",[_._v("在着色器中使用，表示默认的2D纹理。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 TEXTURE_PIXEL_SIZE")])]),_._v(" "),v("td",[_._v("规范化纹理像素大小")]),_._v(" "),v("td",[_._v("在着色器中使用，表示规范化纹理像素大小。对于一个大小为64x32px的Sprite2D纹理，TEXTURE_PIXEL_SIZE = vec2(1/64, 1/32)。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in bool AT_LIGHT_PASS")])]),_._v(" "),v("td",[_._v("始终为false")]),_._v(" "),v("td",[_._v("在着色器中使用，表示始终为false。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("sampler2D SPECULAR_SHININESS_TEXTURE")])]),_._v(" "),v("td",[_._v("对象的镜面反射度纹理")]),_._v(" "),v("td",[_._v("在着色器中使用，表示对象的镜面反射度纹理。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 SPECULAR_SHININESS")])]),_._v(" "),v("td",[_._v("镜面反射度颜色，从纹理中取样")]),_._v(" "),v("td",[_._v("在着色器中使用，表示镜面反射度颜色，从纹理中取样。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 UV")])]),_._v(" "),v("td",[_._v("来自顶点功能的UV")]),_._v(" "),v("td",[_._v("在着色器中使用，表示来自顶点功能的UV。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 SCREEN_UV")])]),_._v(" "),v("td",[_._v("屏幕当前像素的UV坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示屏幕当前像素的UV坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("sampler2D SCREEN_TEXTURE")])]),_._v(" "),v("td",[_._v("已在Godot 4中移除。使用带有 hint_screen_texture 的sampler2D")]),_._v(" "),v("td",[_._v("在着色器中使用，表示已在Godot 4中移除。使用带有 hint_screen_texture 的sampler2D。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 NORMAL")])]),_._v(" "),v("td",[_._v("从 NORMAL_TEXTURE 中读取，可写")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从 NORMAL_TEXTURE 中读取法线。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("sampler2D NORMAL_TEXTURE")])]),_._v(" "),v("td",[_._v("默认2D法线纹理")]),_._v(" "),v("td",[_._v("在着色器中使用，表示默认2D法线纹理。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec3 NORMAL_MAP")])]),_._v(" "),v("td",[_._v("用于2D中的法线贴图配置，如果使用则覆盖NORMAL")]),_._v(" "),v("td",[_._v("在着色器中使用，表示用于2D中的法线贴图配置，如果使用则覆盖NORMAL。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out float NORMAL_MAP_DEPTH")])]),_._v(" "),v("td",[_._v("用于法线贴图的深度缩放")]),_._v(" "),v("td",[_._v("在着色器中使用，表示用于法线贴图的深度缩放。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec2 VERTEX")])]),_._v(" "),v("td",[_._v("屏幕空间中的像素位置")]),_._v(" "),v("td",[_._v("在着色器中使用，表示屏幕空间中的像素位置。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec2 SHADOW_VERTEX")])]),_._v(" "),v("td",[_._v("与VERTEX相同，但可写以更改阴影")]),_._v(" "),v("td",[_._v("在着色器中使用，表示与VERTEX相同，但可写以更改阴影。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec3 LIGHT_VERTEX")])]),_._v(" "),v("td",[_._v("与VERTEX相同，但可写以更改照明")]),_._v(" "),v("td",[_._v("在着色器中使用，表示与VERTEX相同，但可写以更改照明。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec4 COLOR")])]),_._v(" "),v("td",[_._v("来自顶点函数和输出片段颜色")]),_._v(" "),v("td",[_._v("在着色器中使用，表示来自顶点函数和输出片段颜色。")])])])]),_._v(" "),v("h2",{attrs:{id:"内置灯光-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#内置灯光-2"}},[_._v("#")]),_._v(" 内置灯光")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("in vec4 FRAGCOORD")])]),_._v(" "),v("td",[_._v("像素中心的坐标")]),_._v(" "),v("td",[_._v("在着色器中使用，表示像素中心的坐标。在屏幕空间中，xy 表示窗口中的位置，如果没有用 DEPTH，则 z 表示片段深度。原点位于左下角。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 NORMAL")])]),_._v(" "),v("td",[_._v("输入法线")]),_._v(" "),v("td",[_._v("在着色器中使用，表示输入法线。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 COLOR")])]),_._v(" "),v("td",[_._v("输入颜色。这是带有最终调制的片段函数的输出颜色。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示输入颜色。这是带有最终调制的片段函数的输出颜色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 UV")])]),_._v(" "),v("td",[_._v("来自顶点函数的UV，相当于片段函数中的UV。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示来自顶点函数的UV。相当于片段函数中的UV。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("sampler2D TEXTURE")])]),_._v(" "),v("td",[_._v("当前CanvasItem使用的纹理。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示当前CanvasItem使用的纹理。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 TEXTURE_PIXEL_SIZE")])]),_._v(" "),v("td",[_._v("默认2D纹理的规范化像素大小。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示默认2D纹理的规范化像素大小。对于一个大小为64x32px的Sprite2D纹理，TEXTURE_PIXEL_SIZE = vec2(1/64, 1/32)。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 SCREEN_UV")])]),_._v(" "),v("td",[_._v("屏幕当前像素的UV坐标。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示屏幕当前像素的UV坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec2 POINT_COORD")])]),_._v(" "),v("td",[_._v("点精灵的UV坐标。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示点精灵的UV坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 LIGHT_COLOR")])]),_._v(" "),v("td",[_._v("光的颜色。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示光的颜色。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in float LIGHT_ENERGY")])]),_._v(" "),v("td",[_._v("光的能量乘数。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示光的能量乘数。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 LIGHT_POSITION")])]),_._v(" "),v("td",[_._v("光的位置，以屏幕空间为单位。如果使用DirectionalLight2D，则始终为vec3(0,0,0)。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示光的位置，以屏幕空间为单位。如果使用DirectionalLight2D，则始终为vec3(0,0,0)。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 LIGHT_DIRECTION")])]),_._v(" "),v("td",[_._v("光的方向，以屏幕空间为单位。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示光的方向，以屏幕空间为单位。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in bool LIGHT_IS_DIRECTIONAL")])]),_._v(" "),v("td",[_._v("如果此通道是DirectionalLight2D，则为true。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示如果此通道是DirectionalLight2D，则为true。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec3 LIGHT_VERTEX")])]),_._v(" "),v("td",[_._v("像素位置，以屏幕空间为单位，如在片段函数中修改。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示像素位置，以屏幕空间为单位，如在片段函数中修改。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("inout vec4 LIGHT")])]),_._v(" "),v("td",[_._v("从浅色纹理和输出颜色中取值。可修改。如果不使用，将忽略光照函数。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示从浅色纹理和输出颜色中取值。可修改。如果不使用，将忽略光照函数。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("in vec4 SPECULAR_SHININESS")])]),_._v(" "),v("td",[_._v("物体纹理中设置的镜面反射度。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示物体纹理中设置的镜面反射度。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("out vec4 SHADOW_MODULATE")])]),_._v(" "),v("td",[_._v("将在此点投射的阴影乘以此颜色。")]),_._v(" "),v("td",[_._v("在着色器中使用，表示将在此点投射的阴影乘以此颜色。")])])])]),_._v(" "),v("h2",{attrs:{id:"sdf函数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#sdf函数"}},[_._v("#")]),_._v(" SDF函数")]),_._v(" "),v("p",[_._v("这些函数用于在CanvasItem着色器中对自动生成的Signed Distance Field（SDF）纹理进行采样。SDF纹理是从场景中启用了SDF Collision属性的LightOccluder2D节点生成的。有关更多信息，请参阅2D灯光和阴影文档。")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("函数")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[v("code",[_._v("float texture_sdf (vec2 sdf_pos)")])]),_._v(" "),v("td",[_._v("执行SDF纹理查找。")]),_._v(" "),v("td",[_._v("在CanvasItem着色器的Fragment和Light函数中使用，执行SDF纹理查找。传入SDF纹理坐标，返回相应位置的距离值。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("vec2 texture_sdf_normal (vec2 sdf_pos)")])]),_._v(" "),v("td",[_._v("执行SDF法线纹理查找。")]),_._v(" "),v("td",[_._v("在CanvasItem着色器的Fragment和Light函数中使用，执行SDF法线纹理查找。传入SDF纹理坐标，返回相应位置的法线值。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("vec2 sdf_to_screen_uv (vec2 sdf_pos)")])]),_._v(" "),v("td",[_._v("将SDF坐标转换为屏幕UV坐标。")]),_._v(" "),v("td",[_._v("在CanvasItem着色器的Fragment和Light函数中使用，将SDF坐标转换为屏幕UV坐标。传入SDF坐标，返回相应的屏幕UV坐标。")])]),_._v(" "),v("tr",[v("td",[v("code",[_._v("vec2 screen_uv_to_sdf (vec2 uv)")])]),_._v(" "),v("td",[_._v("将屏幕UV坐标转换为SDF坐标。")]),_._v(" "),v("td",[_._v("在CanvasItem着色器的Fragment和Light函数中使用，将屏幕UV坐标转换为SDF坐标。传入屏幕UV坐标，返回相应的SDF坐标。")])])])]),_._v(" "),v("hr"),_._v(" "),v("h1",{attrs:{id:"粒子着色器-particle"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#粒子着色器-particle"}},[_._v("#")]),_._v(" 粒子着色器（particle）")]),_._v(" "),v("p",[_._v("Particle shaders是一种特殊类型的着色器，在对象被绘制之前运行。它们用于计算材质属性，如颜色、位置和旋转。它们与CanvasItem或Spatial的常规材质一起绘制，具体取决于它们是2D还是3D。")]),_._v(" "),v("p",[_._v("Particle shaders是独特的，因为它们不用于绘制对象本身；它们用于计算粒子属性，然后由CanvasItem或Spatial着色器使用。它们包含两个处理器函数："),v("code",[_._v("start()")]),_._v(" 和 "),v("code",[_._v("process()")]),_._v("。")]),_._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[_._v("shader_type particles;\n\nvoid start() {\n\t// Place start code here.\n}\n\nvoid process() {\n\t// Place process code here.\n}\n\n")])]),_._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[_._v("1")]),v("br"),v("span",{staticClass:"line-number"},[_._v("2")]),v("br"),v("span",{staticClass:"line-number"},[_._v("3")]),v("br"),v("span",{staticClass:"line-number"},[_._v("4")]),v("br"),v("span",{staticClass:"line-number"},[_._v("5")]),v("br"),v("span",{staticClass:"line-number"},[_._v("6")]),v("br"),v("span",{staticClass:"line-number"},[_._v("7")]),v("br"),v("span",{staticClass:"line-number"},[_._v("8")]),v("br"),v("span",{staticClass:"line-number"},[_._v("9")]),v("br"),v("span",{staticClass:"line-number"},[_._v("10")]),v("br")])]),v("p",[_._v("与其他着色器类型不同，particle shaders保留了前一帧输出的数据。因此，particle shaders可用于在多帧上发生的复杂效果。")]),_._v(" "),v("h2",{attrs:{id:"渲染模式-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#渲染模式-3"}},[_._v("#")]),_._v(" 渲染模式")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("渲染模式")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("变量的用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("keep_data")]),_._v(" "),v("td",[_._v("不要在重启时清除以前的数据")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("disable_force")]),_._v(" "),v("td",[_._v("禁用引力力")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("disable_velocity")]),_._v(" "),v("td",[_._v("忽略 VELOCITY 值")]),_._v(" "),v("td",[_._v("-")])])])]),_._v(" "),v("h2",{attrs:{id:"start-和-process-内置"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#start-和-process-内置"}},[_._v("#")]),_._v(" start 和 process 内置")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("in float LIFETIME")]),_._v(" "),v("td",[_._v("粒子寿命")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in float DELTA")]),_._v(" "),v("td",[_._v("处理时间差")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in uint NUMBER")]),_._v(" "),v("td",[_._v("发射开始后的唯一编号")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in uint INDEX")]),_._v(" "),v("td",[_._v("粒子索引（在所有粒子范围内）")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in mat4 EMISSION_TRANSFORM")]),_._v(" "),v("td",[_._v("发射器变换（用于非本地坐标系）")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in uint RANDOM_SEED")]),_._v(" "),v("td",[_._v("随机种子，是随机的基础")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("inout bool ACTIVE")]),_._v(" "),v("td",[_._v("当粒子激活时为 true，可以设置为 false。")]),_._v(" "),v("td",[_._v("修改粒子的激活状态")])]),_._v(" "),v("tr",[v("td",[_._v("inout vec4 COLOR")]),_._v(" "),v("td",[_._v("粒子的颜色")]),_._v(" "),v("td",[_._v("可以写入 Mesh 的顶点函数中，也可以访问")])]),_._v(" "),v("tr",[v("td",[_._v("inout vec3 VELOCITY")]),_._v(" "),v("td",[_._v("粒子速度")]),_._v(" "),v("td",[_._v("可以修改")])]),_._v(" "),v("tr",[v("td",[_._v("inout mat4 TRANSFORM")]),_._v(" "),v("td",[_._v("粒子变换")]),_._v(" "),v("td",[_._v("可以修改")])]),_._v(" "),v("tr",[v("td",[_._v("inout vec4 CUSTOM")]),_._v(" "),v("td",[_._v("自定义粒子数据")]),_._v(" "),v("td",[_._v("网格的着色器可以使用 INSTANCE_CUSTOM 访问")])]),_._v(" "),v("tr",[v("td",[_._v("inout float MASS")]),_._v(" "),v("td",[_._v("粒子质量，用于引力场等。默认为 1.0。")]),_._v(" "),v("td",[_._v("可以修改")])])])]),_._v(" "),v("h2",{attrs:{id:"start专用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#start专用"}},[_._v("#")]),_._v(" start专用")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("in bool RESTART_POSITION")]),_._v(" "),v("td",[_._v("是否重新开始位置")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in bool RESTART_ROT_SCALE")]),_._v(" "),v("td",[_._v("是否重新开始旋转和缩放")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in bool RESTART_VELOCITY")]),_._v(" "),v("td",[_._v("是否重新开始速度")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in bool RESTART_COLOR")]),_._v(" "),v("td",[_._v("是否重新开始颜色")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in bool RESTART_CUSTOM")]),_._v(" "),v("td",[_._v("是否重新开始自定义数据")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in bool RESTART_VELOCITY")]),_._v(" "),v("td",[_._v("是否重新开始速度")]),_._v(" "),v("td",[_._v("-")])])])]),_._v(" "),v("h2",{attrs:{id:"process-专用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#process-专用"}},[_._v("#")]),_._v(" Process 专用")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("变量")]),_._v(" "),v("th",[_._v("描述")]),_._v(" "),v("th",[_._v("用法")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("in bool RESTART")]),_._v(" "),v("td",[_._v("粒子的当前处理帧是否是第一帧。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in uint FLAG_EMIT_POSITION")]),_._v(" "),v("td",[_._v("在 emit_subparticle 函数的最后一个参数上使用的标志，将位置分配给新粒子的变换。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in uint FLAG_EMIT_ROT_SCALE")]),_._v(" "),v("td",[_._v("在 emit_subparticle 函数的最后一个参数上使用的标志，将旋转和缩放分配给新粒子的变换。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in uint FLAG_EMIT_VELOCITY")]),_._v(" "),v("td",[_._v("在 emit_subparticle 函数的最后一个参数上使用的标志，将速度分配给新粒子。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in uint FLAG_EMIT_COLOR")]),_._v(" "),v("td",[_._v("在 emit_subparticle 函数的最后一个参数上使用的标志，将颜色分配给新粒子。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in uint FLAG_EMIT_CUSTOM")]),_._v(" "),v("td",[_._v("在 emit_subparticle 函数的最后一个参数上使用的标志，将自定义数据向量分配给新粒子。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in bool COLLIDED")]),_._v(" "),v("td",[_._v("当粒子与粒子碰撞器发生碰撞时为 true。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in vec3 COLLISION_NORMAL")]),_._v(" "),v("td",[_._v("上次碰撞的法线。如果未检测到碰撞，则为 vec3(0.0)。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in float COLLISION_DEPTH")]),_._v(" "),v("td",[_._v("上次碰撞法线的长度。如果未检测到碰撞，则为 0.0。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in vec3 ATTRACTOR_FORCE")]),_._v(" "),v("td",[_._v("当前粒子上引力子的合力。")]),_._v(" "),v("td",[_._v("-")])]),_._v(" "),v("tr",[v("td",[_._v("in vec4 USERDATAX")]),_._v(" "),v("td",[_._v("使得可以将补充的用户定义数据集成到粒子处理着色器中。 USERDATAX 是由数字标识的六个内置项，X 可以是介于 1 和 6 之间的数字。")]),_._v(" "),v("td",[_._v("-")])])])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("函数")]),_._v(" "),v("th",[_._v("描述")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("bool emit_subparticle(mat4 xform, vec3 velocity, vec4 color, vec4 custom, uint flags)")]),_._v(" "),v("td",[_._v("强制从子发射器发射粒子。")])])])])])}),[],!1,null,null,null);v.default=e.exports}}]);