(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{359:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("前一篇")]),s._v(" "),a("p",[a("RouterLink",{attrs:{to:"/Note_Godot/06.着色器学习（三） 内建函数.html"}},[s._v("06.着色器学习（三） 内建函数")])],1)]),s._v(" "),a("p",[s._v("参考地址：https://docs.godotengine.org/en/4.1/tutorials/shaders/shader_reference/shading_language.html")]),s._v(" "),a("h1",{attrs:{id:"内建变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内建变量"}},[s._v("#")]),s._v(" 内建变量")]),s._v(" "),a("h2",{attrs:{id:"uv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uv"}},[s._v("#")]),s._v(" "),a("code",[s._v("UV")])]),s._v(" "),a("p",[a("code",[s._v("UV")]),s._v(" 是一个二维变量，包含了纹理坐标的X和Y分量。")]),s._v(" "),a("p",[a("code",[s._v("UV")]),s._v(" 取值在0-1之间, 从左到右, 由上到下.")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://files-1306865739.cos.ap-beijing.myqcloud.com/202405151356717.webp",alt:"image.png"}})]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fragment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COLOR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vec4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UV")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("上面代码使用 "),a("code",[s._v("UV")]),s._v(" 的xy分量作为 COLOR的 r 和 g 分量")]),s._v(" "),a("p",[s._v("效果：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://files-1306865739.cos.ap-beijing.myqcloud.com/202405151356718.webp",alt:""}})])]),s._v(" "),a("h2",{attrs:{id:"texture"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#texture"}},[s._v("#")]),s._v(" "),a("code",[s._v("TEXTURE")])]),s._v(" "),a("p",[a("code",[s._v("TEXTURE")]),s._v(" 表示当前片段着色器中使用的纹理")]),s._v(" "),a("p",[s._v("下面代码使用UV坐标从"),a("code",[s._v("TEXTURE")]),s._v("中采样颜色，并将结果存储在textureColor中。\n然后赋值给当前片段的COLOR")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("void fragment() {\n    // 使用UV坐标从纹理中采样颜色\n    vec4 textureColor = texture(TEXTURE, UV);\n\n    // 将采样到的颜色赋值给COLOR\n    COLOR = textureColor;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("同理， "),a("code",[s._v("TEXTURE")]),s._v(" 是当前着色器的纹理， 也可以加载自定义的纹理")]),s._v(" "),a("p",[s._v("下面代码就是使用自定义的纹理变量给与到当前片段")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("shader_type canvas_item;\n\nuniform sampler2D custom_texture : hint_black_albedo; // 声明一个sampler2D类型的uniform变量\n\nvoid fragment() {\n    // 在片段着色器中使用custom_texture进行纹理采样\n    vec4 sampledColor = texture(custom_texture, UV);\n\n    // 对采样到的颜色进行处理，例如修改颜色值\n    sampledColor.rgb *= 0.5; // 将颜色值减半\n\n    // 将处理后的颜色赋值给COLOR\n    COLOR = sampledColor;\n}\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("这样就可以在 gd脚本中 控制纹理")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('extends Node2D\n\nfunc _ready():\n    # 获取你的节点（这里假设你的节点有一个ShaderMaterial）\n    var sprite = $Sprite\n\n    # 获取节点的材质\n    var material = sprite.material as ShaderMaterial\n\n    # 确保材质存在且具有uniform变量 custom_texture\n    if material and material.has_shader_param("custom_texture"):\n        # 加载你的纹理\n        var texture = preload("res://path/to/your_texture.png")\n\n        # 将纹理赋值给custom_texture uniform变量\n        material.set_shader_param("custom_texture", texture)\n    else:\n        print("Material or shader param not found.")\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("p",[s._v("以下着色器实现了两个纹理分别占用左半边和右半边")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("shader_type canvas_item;\n\nuniform sampler2D custom_texture;\nuniform float center_line : hint_range(0,1) = 0.5;\n\nvoid fragment() {\n\tvec4 sampledColor = texture(custom_texture, UV);\n\tsampledColor.a = 0.8;\n\tvec4 tempColor = vec4(UV.x, UV.y, 0.9, 0.5);\n\t// 使用 mix 函数混合左右两部分颜色\n    vec4 finalColor = mix(tempColor, sampledColor,  step(UV.x, center_line));\n\n    COLOR = finalColor;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v(':::tip{title="提示"}\n这里用到了 '),a("code",[s._v("mix")]),s._v("函数\n"),a("code",[s._v("mix(x, y, a);")]),s._v("\n其中：")]),s._v(" "),a("p",[s._v("x 和 y 是要插值的两个值，可以是标量、向量或颜色。")]),s._v(" "),a("p",[s._v("a 是插值因子，它决定了 x 和 y 之间的权重。")]),s._v(" "),a("p",[s._v("在0到1的范围内，a 的值为1时结果为 x，为0时结果为 y。\n:::")]),s._v(" "),a("p",[s._v("未设置 sampledColor 时是这样")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://files-1306865739.cos.ap-beijing.myqcloud.com/202405151356719.webp",alt:"image.png"}})]),s._v(" "),a("p",[s._v("我在这里加入了自己绘制的纹理")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://files-1306865739.cos.ap-beijing.myqcloud.com/202405151356720.webp",alt:"image.png"}})]),s._v(" "),a("p",[s._v("效果如下")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://files-1306865739.cos.ap-beijing.myqcloud.com/202405151356721.webp",alt:"image.png"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);