(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{376:function(t,e,s){"use strict";s.r(e);var a=s(4),i=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("前一篇")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/Note_Qt/03.QT 代码片段.html"}},[t._v("QT 代码片段")])],1)]),t._v(" "),e("p",[e("img",{attrs:{src:"https://files-1306865739.cos.ap-beijing.myqcloud.com/202405151415870.png",alt:"image.png"}})]),t._v(" "),e("p",[t._v("相关项目："),e("a",{attrs:{href:"https://github.com/beiklive/PopupClock",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/beiklive/PopupClock"),e("OutboundLink")],1),t._v("\n一个小伙伴报出的这个问题。")]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("检查后发现该QT程序通过注册表开机自启动的方式启动时，会无法读取配置文件，使用手动启动的方式可以正确读取文件。")]),t._v(" "),e("p",[t._v("查阅资料后得知\n程序通过注册表设置为开机启动后，因为开机启动的指令其实也是CMD的指令，所以，如果我们在代码中使用以下代码获取程序路径，其实获取到的是CMD程序的运行路径，也就是"),e("code",[t._v("C:\\Windows\\System32")]),t._v("，所以找不到相对路径的文件。")]),t._v(" "),e("p",[t._v("解决方法：")]),t._v(" "),e("ol",[e("li",[t._v("使用绝对路径")]),t._v(" "),e("li",[t._v("使用QT的获取程序路径的函数"),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("QString appPath = QApplication::applicationFilePath();  \n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),t._v("随后进行拼接即可"),e("div",{staticClass:"language-C++ line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("QString curPath = QCoreApplication::applicationDirPath();\nQFile file(curPath + filePath);\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])])])])])}),[],!1,null,null,null);e.default=i.exports}}]);